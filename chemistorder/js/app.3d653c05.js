(function(t){function e(e){for(var i,n,c=e[0],a=e[1],u=e[2],l=0,d=[];l<c.length;l++)n=c[l],Object.prototype.hasOwnProperty.call(s,n)&&s[n]&&d.push(s[n][0]),s[n]=0;for(i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i]);m&&m(e);while(d.length)d.shift()();return o.push.apply(o,u||[]),r()}function r(){for(var t,e=0;e<o.length;e++){for(var r=o[e],i=!0,n=1;n<r.length;n++){var c=r[n];0!==s[c]&&(i=!1)}i&&(o.splice(e--,1),t=a(a.s=r[0]))}return t}var i={},n={app:0},s={app:0},o=[];function c(t){return a.p+"js/"+({}[t]||t)+"."+{"chunk-40f4cc33":"3065ab02","chunk-2d0d63f1":"34a41274","chunk-e57b56ca":"0830c827"}[t]+".js"}function a(e){if(i[e])return i[e].exports;var r=i[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.e=function(t){var e=[],r={"chunk-e57b56ca":1};n[t]?e.push(n[t]):0!==n[t]&&r[t]&&e.push(n[t]=new Promise((function(e,r){for(var i="css/"+({}[t]||t)+"."+{"chunk-40f4cc33":"31d6cfe0","chunk-2d0d63f1":"31d6cfe0","chunk-e57b56ca":"8d6a4e2b"}[t]+".css",s=a.p+i,o=document.getElementsByTagName("link"),c=0;c<o.length;c++){var u=o[c],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===i||l===s))return e()}var d=document.getElementsByTagName("style");for(c=0;c<d.length;c++){u=d[c],l=u.getAttribute("data-href");if(l===i||l===s)return e()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=e,m.onerror=function(e){var i=e&&e.target&&e.target.src||s,o=new Error("Loading CSS chunk "+t+" failed.\n("+i+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=i,delete n[t],m.parentNode.removeChild(m),r(o)},m.href=s;var h=document.getElementsByTagName("head")[0];h.appendChild(m)})).then((function(){n[t]=0})));var i=s[t];if(0!==i)if(i)e.push(i[2]);else{var o=new Promise((function(e,r){i=s[t]=[e,r]}));e.push(i[2]=o);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,a.nc&&l.setAttribute("nonce",a.nc),l.src=c(t);var d=new Error;u=function(e){l.onerror=l.onload=null,clearTimeout(m);var r=s[t];if(0!==r){if(r){var i=e&&("load"===e.type?"missing":e.type),n=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+i+": "+n+")",d.name="ChunkLoadError",d.type=i,d.request=n,r[1](d)}s[t]=void 0}};var m=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(e)},a.m=t,a.c=i,a.d=function(t,e,r){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(a.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(r,i,function(e){return t[e]}.bind(null,i));return r},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/",a.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=e,u=u.slice();for(var d=0;d<u.length;d++)e(u[d]);var m=l;o.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"31c3":function(t,e,r){},"56d7":function(t,e,r){"use strict";r.r(e);r("7514"),r("1c4c"),r("8a81"),r("f466"),r("579f"),r("587a");var i=r("a026"),n=r("5f5b"),s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("router-view")},o=[],c={name:"app"},a=c,u=(r("5c0b"),r("2877")),l=Object(u["a"])(a,s,o,!1,null,null,null),d=l.exports,m=r("8c4f"),h=r("8aa5"),f=r.n(h),p=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"animated fadeIn"},[r("b-row",[r("b-col",[r("b-card",[r("div",{attrs:{slot:"header"},slot:"header"},[r("span",[r("i",{staticClass:"fa fa-book"}),t._v("\n            Products ("+t._s(t.productCount)+")\n          ")]),r("b-link",{staticClass:"pull-right",on:{click:t.addNewProduct}},[t._v("Add New Product")])],1),r("b-row",[r("b-col",{attrs:{sm:"12",md:"6"}},[r("b-input-group",{staticClass:"mb-5"},[r("b-form-input",{on:{keydown:function(e){return t.seartTextKeydown(e)}},model:{value:t.searchText,callback:function(e){t.searchText=e},expression:"searchText"}}),r("b-input-group-append",[""!=t.searchText?r("span",{staticClass:"fa fa-close",attrs:{id:"searchclear"},on:{click:t.clearSearchText}}):t._e(),r("b-button",{attrs:{variant:"outline-success"},on:{click:function(e){return t.clickSearchProduct()}}},[r("span",{staticClass:"fa fa-search"}),t._v(" Search\n                ")])],1)],1)],1)],1),t.useMobileView?t._e():r("products-list",{attrs:{products:t.products,"search-text":t.searchText},on:{productClicked:t.productClicked,deleteProduct:t.deleteProduct,editProduct:t.editProduct}}),t.useMobileView?r("products-list-mobile",{attrs:{products:t.products},on:{productClicked:t.productClicked,deleteProduct:t.deleteProduct,editProduct:t.editProduct}}):t._e(),r("b-row",{staticClass:"load-more"},[r("b-button",{attrs:{variant:"outline-success",disabled:t.isLoadingMore},on:{click:function(e){return t.loadMoreProduct(e)}}},[t._v("Load more")])],1)],1)],1)],1),r("product-detail",{attrs:{id:"productEdit",item:t.product},on:{productSaved:t.productSaved}})],1)},b=[],v=(r("7f7f"),r("cebc")),g=(r("ac6a"),function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-modal",{attrs:{id:t.id,title:"Product Detail",size:"lg"},on:{ok:t.saveProduct}},[r("b-row",[r("b-col",{attrs:{sm:"12"}},[r("div",{staticClass:"alert alert-primary",attrs:{role:"alert"}},[t.isCheckingCwPrice?[r("div",{staticClass:"spinner-border spinner-border-sm text-success",attrs:{role:"status"}},[r("span",{staticClass:"sr-only"})]),t._v("  Checking CW Price...\n        ")]:t._e(),t.cwMatchedProductChange?t._e():[t._v("No change")],t.cwMatchedProductChange?[t._v("\n          This product matched with CW product: ["+t._s(t.cwMatchedProduct.id)+" - "+t._s(t.cwMatchedProduct.label)+"]\n          "),r("br"),t._v("\n          Thumbnail: "+t._s(t.cwMatchedProduct.thumbnail)+"\n          "),r("br"),t._v("\n          Price: "+t._s(t._f("currency")(t.cwMatchedProduct.price,t.audConfig))+"\n          "),"less"==t.cwMatchedProduct.priceStatus?r("i",{staticClass:"fa fa-chevron-down",staticStyle:{color:"green"}}):t._e(),"greater"==t.cwMatchedProduct.priceStatus?r("i",{staticClass:"fa fa-chevron-up",staticStyle:{color:"red"}}):t._e(),"equal"==t.cwMatchedProduct.priceStatus?r("i",{staticClass:"fa fa-check"}):t._e(),r("br"),r("br"),r("b-button",{attrs:{type:"submit",size:"sm",variant:"success"},on:{click:function(e){return t.updateCwMatchedProduct()}}},[r("i",{staticClass:"fa fa-edit"}),t._v(" Update\n          ")])]:t._e()],2)])],1),r("b-row",[r("b-col",{attrs:{sm:"8"}},[r("b-form-group",[r("label",{attrs:{for:"name"}},[t._v("Name")]),r("b-form-input",{attrs:{type:"text",id:"name",placeholder:"Enter product name"},model:{value:t.prod.name,callback:function(e){t.$set(t.prod,"name",e)},expression:"prod.name"}})],1),r("b-form-group",[r("label",{attrs:{for:"thumbnail"}},[t._v("Thumbnail")]),r("b-form-input",{attrs:{type:"text",id:"thumbnail",placeholder:"Enter thumbnail link"},model:{value:t.prod.thumbnail,callback:function(e){t.$set(t.prod,"thumbnail",e)},expression:"prod.thumbnail"}})],1)],1),r("b-col",{attrs:{sm:"4"}},[r("img",{attrs:{src:t.prod.thumbnail,alt:t.prod.name,width:"150px",height:"150px"}})])],1),r("b-row",[r("b-col",{attrs:{sm:"4"}},[r("b-form-group",[r("label",{attrs:{for:"weight"}},[t._v("Weight (g)")]),r("b-form-input",{attrs:{type:"text",id:"weight",placeholder:"0"},model:{value:t.prod.weight,callback:function(e){t.$set(t.prod,"weight",e)},expression:"prod.weight"}})],1)],1),r("b-col",{attrs:{sm:"4"}},[r("b-form-group",[r("label",{attrs:{for:"bvprice"}},[t._v("BetterValue Price (A$)")]),r("b-form-input",{attrs:{type:"text",id:"bvprice",placeholder:"0.00"},model:{value:t.prod.bvPrice,callback:function(e){t.$set(t.prod,"bvPrice",e)},expression:"prod.bvPrice"}})],1)],1),r("b-col",{attrs:{sm:"4"}},[r("b-form-group",[r("label",{attrs:{for:"cwprice"}},[t._v("ChemistWarehouse Price (A$)")]),r("b-form-input",{attrs:{type:"text",id:"cwprice",placeholder:"0.00"},model:{value:t.prod.cwPrice,callback:function(e){t.$set(t.prod,"cwPrice",e)},expression:"prod.cwPrice"}})],1)],1)],1),r("b-row",[r("b-col",{attrs:{sm:"4"}},[r("b-form-group",[r("label",{attrs:{for:"shipprice"}},[t._v("Shipment Price (A$)")]),r("b-form-input",{attrs:{type:"text",id:"shipprice",placeholder:"0.00"},model:{value:t.prod.shipPrice,callback:function(e){t.$set(t.prod,"shipPrice",e)},expression:"prod.shipPrice"}})],1)],1),r("b-col",{attrs:{sm:"4"}},[r("b-form-group",[r("label",[r("b-form-checkbox",{on:{change:t.bvSalePricePickChanged},model:{value:t.prod.bvSalePricePick,callback:function(e){t.$set(t.prod,"bvSalePricePick",e)},expression:"prod.bvSalePricePick"}},[t._v("BV Sale Price (A$)")])],1),r("b-form-input",{attrs:{type:"text",id:"bvsaleprice",placeholder:"0.00"},model:{value:t.prod.bvSalePrice,callback:function(e){t.$set(t.prod,"bvSalePrice",e)},expression:"prod.bvSalePrice"}})],1)],1),r("b-col",{attrs:{sm:"4"}},[r("b-form-group",[r("label",[r("b-form-checkbox",{on:{change:t.cwSalePricePickChanged},model:{value:t.prod.cwSalePricePick,callback:function(e){t.$set(t.prod,"cwSalePricePick",e)},expression:"prod.cwSalePricePick"}},[t._v("CW Sale Price (A$)")])],1),r("b-form-input",{attrs:{type:"text",id:"buyprice",placeholder:"0.00"},model:{value:t.prod.cwSalePrice,callback:function(e){t.$set(t.prod,"cwSalePrice",e)},expression:"prod.cwSalePrice"}})],1)],1)],1),r("b-row",[r("b-col",{attrs:{sm:"4"}}),r("b-col",{attrs:{sm:"4"}},[r("b-form-group",[r("label",{attrs:{for:"selprice"}},[t._v("Selling Price (A$)")]),r("b-form-input",{attrs:{type:"text",id:"selprice",placeholder:"0.00"},model:{value:t.prod.selPrice,callback:function(e){t.$set(t.prod,"selPrice",e)},expression:"prod.selPrice"}})],1)],1),r("b-col",{attrs:{sm:"4"}},[r("b-form-group",[r("label",{attrs:{for:"buyprice"}},[t._v("Buying Price (A$)")]),r("b-form-input",{attrs:{type:"text",id:"buyprice",placeholder:"0.00"},model:{value:t.prod.buyPrice,callback:function(e){t.$set(t.prod,"buyPrice",e)},expression:"prod.buyPrice"}})],1)],1)],1),r("b-row",[r("b-col",{attrs:{sm:"4"}},[r("b-form-group",{attrs:{description:"Buy. Price + Ship"}},[r("label",{attrs:{for:"oriprice"}},[t._v("Ori. Price (A$)")]),t._v(" -\n        "),r("vnd-price",{attrs:{value:t.prod.oriPrice}}),r("b-form-input",{attrs:{type:"text",id:"oriprice",placeholder:"0.00"},model:{value:t.prod.oriPrice,callback:function(e){t.$set(t.prod,"oriPrice",e)},expression:"prod.oriPrice"}})],1)],1),r("b-col",{attrs:{sm:"4"}},[r("b-form-group",{attrs:{description:"Sel. Price + Commission(10%) + Ship + $2"}},[r("label",{attrs:{for:"sugprice"}},[t._v("\n          Sug. Price (A$) -\n          "),r("vnd-price",{attrs:{value:t.prod.sugPrice}})],1),r("b-form-input",{attrs:{placeholder:"0.00"},model:{value:t.prod.sugPrice,callback:function(e){t.$set(t.prod,"sugPrice",e)},expression:"prod.sugPrice"}})],1)],1),r("b-col",{attrs:{sm:"4"}},[r("b-form-group",[r("label",{attrs:{for:"rndprice"}},[t._v("\n          Rnd. Price (VND) -\n          "),r("i",{staticStyle:{color:"red"}},[t._v(t._s(t._f("currency")(t.prod.rndPrice,t.vndConfig)))])]),r("b-form-input",{attrs:{type:"text",placeholder:"0.00"},model:{value:t.prod.rndPrice,callback:function(e){t.$set(t.prod,"rndPrice",e)},expression:"prod.rndPrice"}})],1)],1)],1)],1)}),y=[],C=(r("a481"),{commissionRate:1.1,vndExchageRate:16500,ctvCommissionRate:1.08,buyingFee:2}),P={priceSettings:C},k=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("span",{staticStyle:{color:"red"}},[r("i",[t._v(t._s(t._f("currency")(t.display,t.vndConfig)))])])},w=[],x=P.priceSettings,S={name:"vndPrice",props:["value"],mounted:function(){},computed:{display:function(){return parseFloat(this.value)*parseFloat(x.vndExchageRate)}}},$=S,I=Object(u["a"])($,k,w,!1,null,null,null),O=I.exports;r("28a5");function T(t){var e=t.split(" "),r=[];return e.forEach((function(t){var e="";t.split("").forEach((function(t){e+=t.toLowerCase(),r.push(e)}))})),r}var E,M,D,B,N,L,q,A=P.priceSettings,Q={name:"ProductDetail",components:{vndPrice:O},props:["item","id"],data:function(){return{prod:{},show:!1,settings:A,cwMatchedProduct:{},cwMatchedProductChange:!1,isCheckingCwPrice:!1}},mounted:function(){},watch:{item:function(t){var e=this;this.prod=Object(v["a"])({},t),this.$nextTick((function(){e.checkCWPrice()}))},"prod.bvPrice":function(t){this.calculatePrices()},"prod.cwPrice":function(t){this.calculatePrices()},"prod.weight":function(t){this.calculatePrices()},"prod.bvSalePrice":function(t){this.calculatePrices()},"prod.cwSalePrice":function(t){this.calculatePrices()},"prod.bvSalePricePick":function(t){this.calculatePrices()},"prod.cwSalePricePick":function(t){this.calculatePrices()}},computed:{},methods:{saveProduct:function(){var t=this,e=this.prod;if(e.nameSearch=T(e.name),e.name){if(e.id)return this.$fb.productCollection.doc(e.id).set(e).then((function(){return t.$emit("productSaved",Object(v["a"])({},e)),t.$bvModal.hide(t.id),e}));var r=this.$fb.productCollection.doc();return e.id=r.id,r.set(e).then((function(){return t.$fb.counterService.increaseProduct(),t.$emit("productSaved",Object(v["a"])({},e)),t.$bvModal.hide(t.id),e}))}},calculatePrices:function(){var t=this.prod,e=t.weight,r=t.bvPrice,i=t.cwPrice,n=t.bvSalePrice,s=t.cwSalePrice,o=t.bvSalePricePick,c=t.cwSalePricePick;this.prod.shipPrice=parseFloat(e||0)/100,this.prod.selPrice=Math.max(r||0,i||0),this.prod.buyPrice=Math.min(r||9999,i||9999),this.calculateItself(),(s||0)>0&&c&&(this.prod.selPrice=s,this.prod.buyPrice=s,this.calculateItself()),(n||0)>0&&o&&(this.prod.selPrice=n,this.prod.buyPrice=n,this.calculateItself())},calculateItself:function(){this.prod.oriPrice=parseFloat(this.prod.shipPrice)+parseFloat(this.prod.buyPrice),this.prod.sugPrice=parseFloat(this.prod.shipPrice+this.prod.selPrice*A.commissionRate+A.buyingFee).toFixed(2),this.prod.sugPriceVND=parseFloat(this.prod.sugPrice*A.vndExchageRate).toFixed(2)},bvSalePricePickChanged:function(t){t&&(this.prod.cwSalePricePick=!1)},cwSalePricePickChanged:function(t){t&&(this.prod.bvSalePricePick=!1)},checkCWPrice:function(){var t=this;this.prod&&this.prod.name&&(this.cwMatchedProduct={},this.cwMatchedProductChange=!1,this.isCheckingCwPrice=!0,this.$http.get(this.appSettings.cwCheckPriceApi.replace("{term}",this.item.name)).then((function(e){if(e&&200==e.status&&e.data){var r=e.data,i=_.filter(r,(function(t){return parseFloat(t.id)>0}));if(1==i.length){t.cwMatchedProduct=i[0],t.cwMatchedProduct.price=parseFloat(t.cwMatchedProduct.Price),t.cwMatchedProduct.thumbnail=t.appSettings.cwProductThumbnailUrl150.replace("{id}",t.cwMatchedProduct.id);var n=t.cwMatchedProduct.price,s=parseFloat(t.prod.cwPrice);t.cwMatchedProduct.priceStatus=n>s+.5?"greater":n<s-.5?"less":"equal",t.cwMatchedProductChange=t.cwMatchedProduct.thumbnail!=t.prod.thumbnail||"equal"!=t.cwMatchedProduct.priceStatus}}t.isCheckingCwPrice=!1})))},updateCwMatchedProduct:function(){this.cwMatchedProduct.thumbnail!=this.prod.thumbnail&&(this.prod.thumbnail=this.cwMatchedProduct.thumbnail),"equal"!=this.cwMatchedProduct.priceStatus&&(this.prod.cwPrice=parseFloat(this.cwMatchedProduct.price))}}},j=Q,V=Object(u["a"])(j,g,y,!1,null,null,null),F=V.exports,R=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-table",{attrs:{responsive:"sm",items:t.items,fields:t.fields,small:!0,selectable:"","select-mode":"single"},on:{"row-clicked":t.productClicked},scopedSlots:t._u([{key:"cell(index)",fn:function(e){return[t._v(t._s(e.index+1))]}},{key:"cell(name)",fn:function(e){return[r("div",{staticClass:"prod-thumbnail-name"},[r("div",{staticStyle:{width:"50px",height:"50px"}},[e.item.thumbnail?r("img",{attrs:{src:e.item.thumbnail,width:"50px",height:"50px"}}):t._e()]),r("text-highlight",{attrs:{queries:t.queries}},[t._v(t._s(e.value))])],1)]}},{key:"cell(weight)",fn:function(e){return[r("strong",[t._v(t._s(e.item.weight)+"(g)")]),t._v("\n    - "+t._s(t._f("currency")(e.item.shipPrice,t.audConfig))+"\n  ")]}},{key:"cell(tempPrices)",fn:function(e){return[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-3 col-sm-6 label"},[t._v("BV Price")]),r("div",{staticClass:"col-md-3 col-sm-6"},[t._v(t._s(t._f("currency")(e.item.bvPrice,t.audConfig)))]),r("div",{staticClass:"col-md-3 col-sm-6 label"},[t._v("CW Price")]),r("div",{staticClass:"col-md-3 col-sm-6"},[t._v(t._s(t._f("currency")(e.item.cwPrice,t.audConfig)))])]),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-3 col-sm-6 label"},[t._v("BV Sale Price")]),r("div",{staticClass:"col-md-3 col-sm-6"},[t._v(t._s(t._f("currency")(e.item.bvSalePrice,t.audConfig)))]),r("div",{staticClass:"col-md-3 col-sm-6 label"},[t._v("CW Sale Price")]),r("div",{staticClass:"col-md-3 col-sm-6"},[t._v(t._s(t._f("currency")(e.item.cwSalePrice,t.audConfig)))])])]}},{key:"cell(rndPrice)",fn:function(e){return[r("span",{staticClass:"price"},[t._v(t._s(t._f("currency")(e.item.rndPrice,t.vndConfig)))]),e.item.bvSalePricePick?r("b-badge",{attrs:{variant:"success"}},[t._v("BV Sale")]):t._e(),e.item.cwSalePricePick?r("b-badge",{attrs:{variant:"success"}},[t._v("CW Sale")]):t._e(),16500*e.item.sugPrice>e.item.rndPrice?r("b-badge",{attrs:{variant:"warning"}},[t._v("Recheck")]):t._e(),r("br"),r("small",[t._v("Sug. Price: "+t._s(t._f("currency")(e.item.sugPrice,t.audConfig))+" - "+t._s(t._f("currency")(16500*e.item.sugPrice,t.vndConfig)))])]}},{key:"cell(action)",fn:function(e){return[r("b-button",{staticClass:"mr-1",attrs:{type:"submit",size:"sm",variant:"success"},on:{click:function(r){return t.editProduct(e)}}},[r("i",{staticClass:"fa fa-edit"}),t._v(" Edit\n    ")]),r("b-button",{attrs:{type:"submit",size:"sm",variant:"danger"},on:{click:function(r){return t.deleteProduct(e)}}},[r("i",{staticClass:"fa fa-remove"}),t._v(" Delete\n    ")])]}}])})},z=[],W=r("b50c"),U={name:"ProductsListMobile",components:{TextHighlight:W["a"]},props:["products","searchText"],data:function(){return{fields:[{key:"index",label:"#"},{key:"name",class:"name"},{key:"weight",label:"Weight (g)",class:"weight"},{key:"tempPrices",label:"Temp. Prices",class:"temp-price"},{key:"rndPrice",label:"Price",class:"rnd-price"},{key:"action",label:"Action",class:"action"}]}},mounted:function(){},computed:{items:function(){return this.products||[]},queries:function(){return[this.searchText]}},methods:{productClicked:function(t){this.$emit("productClicked",t)},deleteProduct:function(t){this.$emit("deleteProduct",t)},editProduct:function(t){this.$emit("editProduct",t)}}},H=U,K=(r("6b63"),Object(u["a"])(H,R,z,!1,null,null,null)),G=K.exports,J=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-table",{attrs:{responsive:"sm",items:t.items,fields:t.fields,small:!0},on:{"row-clicked":t.productClicked},scopedSlots:t._u([{key:"cell(name)",fn:function(e){return[r("div",{staticClass:"row"},[r("div",{staticClass:"col-4",staticStyle:{overflow:"hidden"}},[r("img",{attrs:{src:e.item.thumbnail,alt:e.item.name,width:"150px",height:"150px"}})]),r("div",{staticClass:"col-8"},[r("strong",[t._v(t._s(e.item.name))]),r("br"),r("strong",[t._v("Weight:")]),t._v("\n        "+t._s(e.item.weight)+"(g)\n        - "+t._s(t._f("currency")(e.item.shipPrice,t.audConfig))+"\n        "),r("br"),r("strong",{staticStyle:{width:"100px"}},[t._v("BV Price")]),t._v("\n        : "+t._s(t._f("currency")(e.item.bvPrice,t.audConfig))+" -\n        "),r("strong",[t._v("Sale")]),t._v("\n        : "+t._s(t._f("currency")(e.item.bvSalePrice,t.audConfig))+"\n        "),r("br"),r("strong",[t._v("CW Price")]),t._v("\n        : "+t._s(t._f("currency")(e.item.cwPrice,t.audConfig))+" -\n        "),r("strong",[t._v("Sale")]),t._v("\n        : "+t._s(t._f("currency")(e.item.cwSalePrice,t.audConfig))+"\n        "),r("br"),r("span",{staticClass:"h4"},[r("strong",[t._v("Price")]),t._v("\n          : "+t._s(t._f("currency")(e.item.rndPrice,t.vndConfig))+"\n        ")]),e.item.bvSalePricePick?r("b-badge",{attrs:{variant:"success"}},[t._v("BV Sale")]):t._e(),e.item.cwSalePricePick?r("b-badge",{attrs:{variant:"success"}},[t._v("CW Sale")]):t._e(),r("div",{staticStyle:{"margin-top":"7px"}},[r("b-button",{staticClass:"mr-1",attrs:{type:"submit",size:"sm",variant:"success"},on:{click:function(r){return t.editProduct(e)}}},[r("i",{staticClass:"fa fa-edit"}),t._v(" Edit\n          ")]),r("b-button",{attrs:{type:"submit",size:"sm",variant:"danger"},on:{click:function(r){return t.deleteProduct(e)}}},[r("i",{staticClass:"fa fa-remove"}),t._v(" Delete\n          ")])],1)],1)])]}},{key:"cell(tempPrices)",fn:function(e){return[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-3 col-sm-6 label"},[t._v("BV Price")]),r("div",{staticClass:"col-md-3 col-sm-6"},[t._v(t._s(t._f("currency")(e.item.bvPrice,t.audConfig)))]),r("div",{staticClass:"col-md-3 col-sm-6 label"},[t._v("CW Price")]),r("div",{staticClass:"col-md-3 col-sm-6"},[t._v(t._s(t._f("currency")(e.item.cwPrice,t.audConfig)))])]),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-3 col-sm-6 label"},[t._v("BV Sale Price")]),r("div",{staticClass:"col-md-3 col-sm-6"},[t._v(t._s(t._f("currency")(e.item.bvSalePrice,t.audConfig)))]),r("div",{staticClass:"col-md-3 col-sm-6 label"},[t._v("CW Sale Price")]),r("div",{staticClass:"col-md-3 col-sm-6"},[t._v(t._s(t._f("currency")(e.item.cwSalePrice,t.audConfig)))])])]}},{key:"cell(rndPrice)",fn:function(e){return[r("span",{staticClass:"price"},[t._v(t._s(t._f("currency")(e.item.rndPrice,t.vndConfig)))]),e.item.bvSalePricePick?r("b-badge",{attrs:{variant:"success"}},[t._v("BV Sale")]):t._e(),e.item.cwSalePricePick?r("b-badge",{attrs:{variant:"success"}},[t._v("CW Sale")]):t._e()]}}])})},Y=[],X={name:"ProductsList",components:{},props:["products"],data:function(){return{fields:[{key:"name",label:"",class:""}]}},mounted:function(){},computed:{items:function(){return this.products||[]}},methods:{productClicked:function(t){this.$emit("productClicked",t)},deleteProduct:function(t){this.$emit("deleteProduct",t)},editProduct:function(t){this.$emit("editProduct",t)}}},Z=X,tt=(r("cdc0"),Object(u["a"])(Z,J,Y,!1,null,null,null)),et=tt.exports,rt={name:"Products",components:{productDetail:F,productsList:G,productsListMobile:et},data:function(){return{products:[],product:{},productBatches:"",useMobileView:!1,searchText:"",pageSize:10,lastVisible:void 0,productCount:0,isLoadingMore:!1}},mounted:function(){var t=this,e=this;e.useMobileView=window.innerWidth<700,window.addEventListener("resize",(function(){e.useMobileView=window.innerWidth<700})),this.loadProducts(),this.$fb.counterService.getProductCount().then((function(e){return t.productCount=e}))},watch:{searchText:function(t,e){""!=e&&""==t&&(this.products=[],this.loadProducts())}},computed:{},methods:{loadProducts:function(t){var e=this;return this.$fb.productCollection.orderBy("name").startAfter(this.lastVisible||0).limit(this.pageSize).get().then((function(t){t.empty||(e.lastVisible=_.last(t.docs),t.forEach((function(t){e.products.push(t.data())})))}))},loadMoreProduct:function(t){var e=this;this.isLoadingMore=!0,this.searchText?this.searchProduct(this.lastVisible).then((function(){return e.isLoadingMore=!1})):this.loadProducts(this.lastVisible).then((function(){return e.isLoadingMore=!1}))},productClicked:function(t){this.product=Object(v["a"])({},t)},deleteProduct:function(t){var e=this,r=t.item,i=t.index;r&&this.$bvModal.msgBoxConfirm("Are you sure you want to delete [".concat(r.name,"]?")).then((function(t){t&&(e.$fb.productCollection.doc(r.id).delete().then((function(){e.products.splice(i,1)})),e.$fb.counterService.decreaseProduct().then((function(t){return e.productCount=t})))})).catch((function(t){console.log(t)}))},addNewProduct:function(){this.product=void 0,this.selectedIndex=void 0,this.$bvModal.show("productEdit")},productSaved:function(t){void 0!=this.selectedIndex?this.products.splice(this.selectedIndex,1,t):this.products.push(t)},editProduct:function(t){var e=t.index,r=t.item;this.product=Object(v["a"])({},r),this.selectedIndex=e,this.$bvModal.show("productEdit")},saveProductBatches:function(){var t=this,e=JSON.parse(this.productBatches);e.forEach((function(t){t.nameSearch=T(t.name)})),console.table(e);var r=this.$fb.db.batch();e.forEach((function(e){var i=t.$fb.productCollection.doc();e.id=i.id,r.set(i,e)})),r.commit().then((function(){console.log("Finish Product Batches")}))},clickSearchProduct:function(){this.products=[],this.searchProduct()},searchProduct:function(t){var e=this;if(this.searchText)return this.$fb.productCollection.where("nameSearch","array-contains",this.searchText.toLowerCase().trim()).orderBy("name").startAfter(t||0).limit(10).get().then((function(t){t.empty||(e.lastVisible=_.last(t.docs),t.forEach((function(t){e.products.push(t.data())})))}))},seartTextKeydown:function(t){13===t.keyCode&&(this.products=[],this.searchProduct())},clearSearchText:function(){this.searchText=""}}},it=rt,nt=(r("b12d"),Object(u["a"])(it,p,b,!1,null,null,null)),st=nt.exports,ot=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"animated fadeIn"},[r("b-row",[r("b-col",[r("b-card",[r("div",{attrs:{slot:"header"},slot:"header"},[r("span",[r("i",{staticClass:"fa fa-user-o"}),t._v("\n            Customers ("+t._s(t.count)+")\n          ")]),r("b-link",{staticClass:"pull-right",on:{click:t.addNewCustomer}},[t._v("Add New Customer")])],1),r("b-row",[r("b-col",{attrs:{sm:"12",md:"6"}},[r("b-input-group",{staticClass:"mb-5"},[r("b-form-input",{on:{keydown:function(e){return t.seartTextKeydown(e)}},model:{value:t.searchText,callback:function(e){t.searchText=e},expression:"searchText"}}),r("b-input-group-append",[""!=t.searchText?r("span",{staticClass:"fa fa-close",attrs:{id:"searchclear"},on:{click:t.clearSearchText}}):t._e(),r("b-button",{attrs:{variant:"outline-success"},on:{click:function(e){return t.searchCustomer()}}},[r("span",{staticClass:"fa fa-search"}),t._v(" Search\n                ")])],1)],1)],1)],1),r("b-table",{ref:"customerTable",attrs:{responsive:"sm",items:t.customers,fields:t.fields,small:!0,selectable:"","select-mode":"single"},on:{"row-clicked":t.customerClicked,"row-dblclicked":t.customerDoubleClicked},scopedSlots:t._u([{key:"cell(index)",fn:function(e){return[t._v(t._s(e.index+1))]}},{key:"cell(name)",fn:function(e){return[e.item.isEditing?[r("b-form-input",{attrs:{type:"text",placeholder:"Enter customer name"},model:{value:e.item.name,callback:function(r){t.$set(e.item,"name",r)},expression:"data.item.name"}})]:t._e(),e.item.isEditing?t._e():[t._v(t._s(e.value))]]}},{key:"cell(address)",fn:function(e){return[e.item.isEditing?[r("b-form-input",{attrs:{type:"text",placeholder:"Enter customer address"},model:{value:e.item.address,callback:function(r){t.$set(e.item,"address",r)},expression:"data.item.address"}})]:t._e(),e.item.isEditing?t._e():[t._v(t._s(e.value))]]}},{key:"cell(phone)",fn:function(e){return[e.item.isEditing?[r("b-form-input",{attrs:{type:"text",placeholder:"Enter customer phone"},model:{value:e.item.phone,callback:function(r){t.$set(e.item,"phone",r)},expression:"data.item.phone"}})]:t._e(),e.item.isEditing?t._e():[t._v(t._s(e.value))]]}},{key:"cell(action)",fn:function(e){return[e.item.isEditing?t._e():[r("b-button",{staticClass:"mr-1",attrs:{type:"submit",size:"sm",variant:"success"},on:{click:function(r){return t.editCustomer(e)}}},[r("i",{staticClass:"fa fa-edit"}),t._v(" Edit\n              ")]),r("b-button",{attrs:{type:"submit",size:"sm",variant:"danger"},on:{click:function(r){return t.deleteCustomer(e)}}},[r("i",{staticClass:"fa fa-remove"}),t._v(" Delete\n              ")])],e.item.isEditing?[r("b-button",{staticClass:"mr-1",attrs:{type:"submit",size:"sm",variant:"success"},on:{click:function(r){return t.saveCustomer(e)}}},[r("i",{staticClass:"fa fa-edit"}),t._v(" Save\n              ")]),r("b-button",{attrs:{type:"submit",size:"sm",variant:"danger"},on:{click:function(r){return t.cancelEditCustomer(e)}}},[r("i",{staticClass:"fa fa-remove"}),t._v(" Cancel\n              ")])]:t._e()]}}])}),r("b-row",{staticClass:"load-more"},[r("b-button",{attrs:{variant:"outline-success"},on:{click:t.loadMore}},[t._v("Load more")])],1)],1)],1)],1)],1)},ct=[],at={name:"Customers",components:{},data:function(){return{customers:[],customer:{},searchText:"",fields:[{key:"index",label:"#",class:"customer-index-col"},{key:"name",class:"customer-name-col"},{key:"address",class:"customer-address-col"},{key:"phone",class:"customer-phone-col"},{key:"action",class:"customer-action-col"}],paging:{total:0,page:1,size:10},lastVisible:void 0,count:0}},mounted:function(){var t=this;this.loadCustomers(),this.$fb.counterService.getCustomerCount().then((function(e){return t.count=e}))},watch:{searchText:function(t,e){""!=e&&""==t&&(this.customers=[],this.lastVisible=void 0,this.loadCustomers())}},computed:{},methods:{loadCustomers:function(t){var e=this,r=this.$fb.customerCollection.orderBy("name").limit(this.paging.size);this.lastVisible&&(r=r.startAfter(this.lastVisible)),r.get().then((function(t){t.empty||(e.lastVisible=t.docs[t.docs.length-1],t.forEach((function(t){var r=t.data();r.id=t.id,e.customers.push(r)})))}))},customerClicked:function(t){this.customer=Object(v["a"])({},t)},correctData:function(){},deleteCustomer:function(t){var e=this,r=t.item,i=t.index;this.$bvModal.msgBoxConfirm("Are you sure you want to delete customer: [".concat(r.name,"]?")).then((function(t){t&&e.$fb.customerCollection.doc(r.id).delete().then((function(){e.customers.splice(i,1),e.$fb.counterService.decreaseCustomer().then((function(t){return e.count=t}))}))})).catch((function(t){console.log(t)}))},loadMore:function(){this.loadCustomers()},seartTextKeydown:function(t){13===t.keyCode&&this.searchCustomer()},clearSearchText:function(){this.searchText=""},searchCustomer:function(t){var e=this;if(this.searchText)this.$fb.customerCollection.where("nameSearch","array-contains",this.searchText.toLowerCase().trim()).orderBy("name").startAfter(t||0).limit(10).get().then((function(t){e.customers=[],t.empty||(e.lastVisible=_.last(t.docs),t.forEach((function(t){var r=t.data();r.id=t.id,e.customers.push(r)})))}))},editCustomer:function(t){var e=t.item,r=t.index;e.backup=Object(v["a"])({},e),e.isEditing=!0,this.customers.splice(r,1,e)},saveCustomer:function(t){var e=this,r=t.item,i=t.index;if(r.name)return delete r.backup,delete r.isEditing,this.submitCustomer(r).then((function(t){e.customers.splice(i,1,t)}))},submitCustomer:function(t){var e=this;if(t.nameSearch=T(t.name),t.version=(t.version||0)+1,t.id)return this.$fb.customerCollection.doc(t.id).set(t).then((function(){return t}));var r=this.$fb.customerCollection.doc();return t.id=r.id,r.set(t).then((function(){return e.increaseCustomerCount(),t}))},increaseCustomerCount:function(){var t=this;this.$fb.counterService.increaseCustomer().then((function(e){return t.count=e}))},cancelEditCustomer:function(t){var e=t.item,r=t.index;e.id?this.customers.splice(r,1,e.backup):this.customers.splice(r,1)},addNewCustomer:function(){var t={name:"",address:"",phone:"",isEditing:!0};this.customers.unshift(t)},customerDoubleClicked:function(t,e,r){this.editCustomer({index:e,item:t})}}},ut=at,lt=Object(u["a"])(ut,ot,ct,!1,null,null,null),dt=lt.exports,mt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"animated fadeIn"},[r("b-row",[r("b-col",[r("b-card",[r("div",{attrs:{slot:"header"},slot:"header"},[r("i",{staticClass:"cui-user icons font-lg"}),t._v(" Customers\n        ")]),r("b-table",{attrs:{responsive:"sm",items:t.customers,fields:t.fields,small:!0},on:{"row-clicked":t.customerClicked},scopedSlots:t._u([{key:"cell(action)",fn:function(e){return[r("b-button",{attrs:{type:"submit",size:"sm",variant:"danger"},on:{click:function(r){return t.deleteCustomer(e.item)}}},[r("i",{staticClass:"fa fa-remove"}),t._v(" Delete\n            ")])]}}])})],1)],1)],1)],1)},ht=[],ft=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-card",[r("div",{attrs:{slot:"header"},domProps:{innerHTML:t._s(t.caption)},slot:"header"}),r("b-table",{attrs:{dark:t.dark,hover:t.hover,striped:t.striped,bordered:t.bordered,small:t.small,fixed:t.fixed,responsive:"sm",items:t.items,fields:t.captions,"current-page":t.currentPage,"per-page":t.perPage},on:{"row-clicked":t.rowClicked},scopedSlots:t._u([{key:"status",fn:function(e){return[r("b-badge",{attrs:{variant:t.getBadge(e.item.status)}},[t._v(t._s(e.item.status))])]}}])}),r("nav",[r("b-pagination",{attrs:{"total-rows":t.totalRows,"per-page":t.perPage,"prev-text":"Prev","next-text":"Next","hide-goto-end-buttons":""},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)],1)},pt=[],bt=(r("c5f6"),{name:"c-table",inheritAttrs:!1,props:{caption:{type:String,default:"Table"},hover:{type:Boolean,default:!1},striped:{type:Boolean,default:!1},bordered:{type:Boolean,default:!1},small:{type:Boolean,default:!1},fixed:{type:Boolean,default:!1},tableData:{type:[Array,Function],default:function(){return[]}},fields:{type:[Array,Object],default:function(){return[]}},perPage:{type:Number,default:5},dark:{type:Boolean,default:!1}},data:function(){return{currentPage:1}},computed:{items:function(){var t=this.tableData;return Array.isArray(t)?t:t()},totalRows:function(){return this.getRowCount()},captions:function(){return this.fields}},methods:{getBadge:function(t){return"Active"===t?"success":"Inactive"===t?"secondary":"Pending"===t?"warning":"Banned"===t?"danger":"primary"},getRowCount:function(){return this.items.length},rowClicked:function(t){this.$emit("row-clicked",t)}}}),vt=bt,gt=Object(u["a"])(vt,ft,pt,!1,null,null,null),yt=gt.exports,Ct={name:"Settings",components:{cTable:yt},data:function(){return{customers:[],customer:{},fields:[{key:"name",sortable:!0},{key:"address"},{key:"phone"},{key:"action"}]}},mounted:function(){this.loadCustomers()},computed:{notAllowSubmitNewCustomer:function(){return!this.customer||!this.customer.name}},methods:{loadCustomers:function(){var t=this;this.$fb.customerCollection.onSnapshot((function(e){t.customers=[],e.empty||e.forEach((function(e){var r=e.data();r.id=e.id,t.customers.push(r)}))}))},submitNewCustomer:function(){var t=this;this.customer&&this.customer.name&&(this.customer.id?this.$fb.customerCollection.doc(this.customer.id).set(this.customer).then((function(){return t.customer={}})):this.$fb.customerCollection.add(this.customer).then((function(){return t.customer={}})))},customerClicked:function(t){this.customer=Object(v["a"])({},t)},resetCustomer:function(){this.customer={}},deleteCustomer:function(t){t&&this.$fb.customerCollection.doc(t.id).delete()}}},_t=Ct,Pt=Object(u["a"])(_t,mt,ht,!1,null,null,null),kt=(Pt.exports,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"animated fadeIn"},[r("b-row",[r("b-col",[r("b-card",[r("div",{attrs:{slot:"header"},slot:"header"},[r("i",{staticClass:"cui-user icons font-lg"}),t._v(" Orders\n          "),r("b-link",{staticClass:"pull-right",on:{click:t.addNewOrder}},[t._v("Add New Order")])],1),r("b-table",{attrs:{responsive:"sm",items:t.orders,fields:t.fields,small:!0,selectable:"","select-mode":"single",busy:t.isLoadingData},on:{"row-clicked":t.orderClicked},scopedSlots:t._u([{key:"cell(name)",fn:function(e){return[r("a",{staticStyle:{"font-size":"15px"},attrs:{href:t.buildRoute(e.item),variant:"link"}},[t._v(t._s(e.item.name))])]}},{key:"cell(dateCreated)",fn:function(e){return[t._v(t._s(t._f("date")(e.item.dateCreated.toDate())))]}},{key:"cell(quantity)",fn:function(e){return[t._v(t._s(t.sumQuantity(e.item)))]}},{key:"cell(total)",fn:function(e){return[t._v(t._s(t._f("currency")(t.sumTotal(e.item),t.vndConfig)))]}},{key:"cell(action)",fn:function(e){return[r("b-button",{attrs:{type:"submit",size:"sm",variant:"danger"},on:{click:function(r){return t.deleteOrder(e.item)}}},[r("i",{staticClass:"fa fa-remove"}),t._v(" Delete\n            ")])]}}])})],1)],1)],1),r("router-view")],1)}),wt=[],xt=(r("20d6"),r("aef6"),{name:"Orders",components:{},data:function(){return{orders:[],counter:{},selectedOrder:{},isLoadingData:!1,fields:[{key:"name"},{key:"dateCreated",label:"Created Date"},{key:"quantity",label:"Quantity"},{key:"total",label:"Total"},{key:"action",class:"text-right"}]}},mounted:function(){this.loadOrders(),this.loadCounter()},computed:{},methods:{loadCounter:function(){var t=this;this.$fb.counterCollection.limit(1).onSnapshot((function(e){e.empty||e.forEach((function(e){t.counter=e.data(),t.counter.id=e.id}))}))},loadOrders:function(){var t=this;this.orders=[],this.isLoadingData=!0,this.$fb.orderCollection.orderBy("dateCreated","desc").limit(5).get().then((function(e){e.empty||e.forEach((function(e){return t.orders.push(e.data())}))})).then((function(){return t.isLoadingData=!1}))},addNewOrder:function(){var t=this,e={name:this.buildOrderName(),dateCreated:new Date,status:"OPEN"},r=this.$fb.orderCollection.doc();e.id=r.id,r.set(e).then((function(){t.$fb.orderCollection.doc(e.id).get().then((function(e){return t.orders.unshift(e.data())})),t.increaseOrderCount(1)}))},buildOrderName:function(){var t=(this.counter.orderCount||0)+1;return(t+"").endsWith("1")?t+"st Order":(t+"").endsWith("2")?t+"nd Order":(t+"").endsWith("3")?t+"rd Order":t+"th Order"},orderClicked:function(t){this.selectedOrder=t,this.$router.push({name:"OrderStatistic",params:{id:t.id}})},deleteOrder:function(t){var e=this;this.$fb.orderCollection.doc(t.id).delete().then((function(){var r=e.orders.findIndex((function(e){return e.id==t.id}));r>-1&&e.orders.splice(r,1),e.increaseOrderCount(-1)}))},increaseOrderCount:function(t){this.counter.orderCount=this.counter.orderCount+t,this.$fb.counterCollection.doc(this.counter.id).set(this.counter)},sumQuantity:function(t){return t.items&&0!=t.items.length?t.items.reduce((function(t,e){return t+e.quantity}),0):0},sumTotal:function(t){return t.items&&0!=t.items.length?t.items.reduce((function(t,e){return t+e.quantity*parseFloat(e.rndPrice||e.product.rndPrice)}),0):0},buildRoute:function(t){var e=location;e.origin;return this.$router.resolve({name:"OrderDetail",params:{id:t.id}}).href}}}),St=xt,$t=Object(u["a"])(St,kt,wt,!1,null,null,null),It=$t.exports,Ot=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"animated fadeIn"},[r("b-row",[r("b-col",[r("b-card",[r("div",{attrs:{slot:"header"},slot:"header"},[r("b-link",{on:{click:t.goToOrderList}},[r("i",{staticClass:"fa fa-server"}),t._v(" Order:\n          ")]),r("strong",[t._v(t._s(t.order.name))]),r("div",{staticClass:"pull-right"},[r("b-link",{staticClass:"mr-3",on:{click:t.goToShipmentPage}},[t._v("Shipment Page")]),r("b-link",{staticClass:"mr-3",on:{click:t.goToCollectionPage}},[t._v("Collection Page")]),r("b-link",{on:{click:t.addNewOrderItem}},[t._v("Add New Item")])],1)],1),r("div",{staticClass:"order-item"},[r("b-table",{attrs:{"foot-clone":"",responsive:"sm",items:t.order.items,fields:t.fields,small:!0,selectable:"","select-mode":"single"},on:{"row-clicked":t.orderItemClicked},scopedSlots:t._u([{key:"cell(index)",fn:function(e){return[t._v(t._s(e.index+1))]}},{key:"cell(product.name)",fn:function(e){return[r("a",{attrs:{href:"javascript:void(0)"},on:{click:function(r){return t.showProductDetailModal(e.item)}}},[t._v("\n                "+t._s(e.value)+"\n                "),e.item.product.buyPrice&&0!=e.item.product.buyPrice?t._e():r("small",[r("i",{staticStyle:{color:"red"}},[t._v("missing buy price")])])])]}},{key:"cell(price)",fn:function(e){return[e.item.rndPrice!=e.item.product.rndPrice?r("del",{staticStyle:{color:"darkgrey"}},[t._v(t._s(t._f("currency")(e.item.product.rndPrice,t.vndConfig)))]):t._e(),t._v("\n              "+t._s(t._f("currency")(e.item.rndPrice,t.vndConfig))+"\n            ")]}},{key:"cell(total)",fn:function(e){return[t._v(t._s(t._f("currency")(t.calculateTotalOrderItem(e.item),t.vndConfig)))]}},{key:"cell(collectedQuantity)",fn:function(e){return[r("number-input",{attrs:{min:0,max:e.item.quantity,inline:"",controls:"",center:"",size:"sm"},on:{change:function(r){return t.collectedQuantityChanged(e.item,r)}},model:{value:e.item.collectedQuantity,callback:function(r){t.$set(e.item,"collectedQuantity",r)},expression:"data.item.collectedQuantity"}})]}},{key:"cell(collected)",fn:function(e){return[r("b-form-checkbox",{on:{change:function(r){return t.collectedChanged(r,e.item)}},model:{value:e.item.collected,callback:function(r){t.$set(e.item,"collected",r)},expression:"data.item.collected"}})]}},{key:"cell(action)",fn:function(e){return[r("b-button",{staticClass:"mr-1",attrs:{type:"submit",size:"sm",variant:"success"},on:{click:function(r){return t.editOrderItem(e.item)}}},[r("i",{staticClass:"fa fa-edit"}),t._v(" Edit\n              ")]),r("b-button",{attrs:{type:"submit",size:"sm",variant:"danger"},on:{click:function(r){return t.deleteOrderItem(e.item)}}},[r("i",{staticClass:"fa fa-remove"}),t._v(" Delete\n              ")])]}},{key:"foot()",fn:function(t){}},{key:"foot(quantity)",fn:function(e){return[t._v(t._s(t.sumQuantity))]}},{key:"foot(total)",fn:function(e){return[t._v(t._s(t._f("currency")(t.sumTotal,t.vndConfig)))]}},{key:"foot(collectedQuantity)",fn:function(e){return[t._v(t._s(t.sumCollectedQuantity))]}}])})],1)])],1)],1),r("product-detail",{attrs:{id:"productEdit",item:t.product},on:{productSaved:t.productSaved}}),r("order-detail-edit-item",{attrs:{id:"editItem",item:t.selectedOrderItem},on:{saveOrderItem:t.saveOrderItem}})],1)},Tt=[],Et=r("2ef0"),Mt=r.n(Et),Dt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",t._g({staticClass:"input-group",class:{"input-group-sm":"sm"==t.size,"input-group-lg":"lg"==t.size}},t.listeners),[r("div",{staticClass:"input-group-prepend"},[t.controls?r("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button",disabled:t.disabled||t.readonly||!t.decreasable},on:{click:t.decrease}},[r("i",{staticClass:"fa fa-minus"})]):t._e()]),r("input",t._b({ref:"input",staticClass:"form-control",class:{"text-center":t.center},attrs:{type:"number",name:t.name,min:t.min,max:t.max,step:t.step,readonly:t.readonly||!t.inputtable,disabled:t.disabled||!t.decreasable&&!t.increasable,placeholder:t.placeholder,autocomplete:"off"},domProps:{value:t.currentValue},on:{change:t.change,paste:t.paste}},"input",t.attrs,!1)),r("div",{staticClass:"input-group-append"},[t.controls?r("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button",disabled:t.disabled||t.readonly||!t.increasable},on:{click:t.increase}},[r("i",{staticClass:"fa fa-plus"})]):t._e()])])},Bt=[],Nt=(r("ee1d"),Number.isNaN||window.isNaN),Lt=/^-?(?:\d+|\d+\.\d+|\.\d+)(?:[eE][-+]?\d+)?$/,qt=/\.\d*(?:0|9){10}\d*$/,At=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e11;return qt.test(t)?Math.round(t*e)/e:t},Qt={name:"NumberInput",model:{event:"change"},props:{attrs:{type:Object,default:void 0},center:Boolean,controls:Boolean,disabled:Boolean,inputtable:{type:Boolean,default:!0},inline:Boolean,max:{type:Number,default:1/0},min:{type:Number,default:-1/0},name:{type:String,default:void 0},placeholder:{type:String,default:void 0},readonly:Boolean,rounded:Boolean,size:{type:String,default:void 0},step:{type:Number,default:1},value:{type:Number,default:NaN}},data:function(){return{currentValue:NaN}},mouted:function(){},computed:{increasable:function(){var t=this.currentValue;return Nt(t)||t<this.max},decreasable:function(){var t=this.currentValue;return Nt(t)||t>this.min},listeners:function(){var t=Object(v["a"])({},this.$listeners);return delete t.change,t}},watch:{value:{immediate:!0,handler:function(t,e){Nt(t)&&"undefined"===typeof e||t===this.currentValue||this.setValue(t)}}},methods:{change:function(t){this.setValue(Math.min(this.max,Math.max(this.min,t.target.value)))},paste:function(t){var e=t.clipboardData||window.clipboardData;e&&!Lt.test(e.getData("text"))&&t.preventDefault()},decrease:function(){if(this.decreasable){var t=this.currentValue;Nt(t)&&(t=0),this.setValue(Math.min(this.max,Math.max(this.min,At(t-this.step))))}},increase:function(){if(this.increasable){var t=this.currentValue;Nt(t)&&(t=0),this.setValue(Math.min(this.max,Math.max(this.min,At(t+this.step))))}},setValue:function(t){var e=this.currentValue,r=this.rounded?Math.round(t):t;this.min<=this.max&&(r=Math.min(this.max,Math.max(this.min,r))),this.currentValue=r,r===e&&(this.$refs.input.value=r),this.$emit("change",r,e)}}},jt=Qt,Vt=(r("b7cf"),Object(u["a"])(jt,Dt,Bt,!1,null,"52e6fee2",null)),Ft=Vt.exports,Rt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-modal",{attrs:{id:t.id,title:t.modalTitle,size:"lg"},on:{ok:t.saveOrderItem}},[r("b-row",[r("b-col",{attrs:{sm:"4"}},[r("b-form-group",[r("label",[t._v("Customer")]),r("vue-suggestion",{attrs:{items:t.sugCustomers,"item-template":t.customerSugTemplate,setLabel:t.setLabel},on:{focus:t.sugCustomersFocused,onInputChange:t.sugCustomersInputChanged,scrollEnd:t.loadMoreSugCustomers},model:{value:t.orderItem.customer,callback:function(e){t.$set(t.orderItem,"customer",e)},expression:"orderItem.customer"}})],1)],1),r("b-col",{attrs:{sm:"8"}},[r("b-form-group",[r("label",[t._v("Product")]),r("vue-suggestion",{attrs:{items:t.sugProducts,"item-template":t.productSugTemplate,setLabel:t.setLabel},on:{focus:t.sugProductsFocused,onInputChange:t.sugProductsInputChanged,onItemSelected:t.sugProductsItemSelected,scrollEnd:t.loadMoreSugProducts},model:{value:t.orderItem.product,callback:function(e){t.$set(t.orderItem,"product",e)},expression:"orderItem.product"}})],1)],1)],1),r("b-row",[r("b-col",{attrs:{sm:"4"}},[r("b-form-group",[r("label",[t._v("Quantity")]),r("number-input",{attrs:{min:1,max:999,inline:"",controls:"",center:""},model:{value:t.orderItem.quantity,callback:function(e){t.$set(t.orderItem,"quantity",e)},expression:"orderItem.quantity"}})],1)],1),r("b-col",{attrs:{sm:"8"}},[r("b-form-group",[r("label",[t._v("Price - "+t._s(t._f("currency")(t.orderItem.rndPrice,t.vndConfig)))]),r("b-form-input",{attrs:{type:"text",placeholder:"Enter rnd price"},model:{value:t.orderItem.rndPrice,callback:function(e){t.$set(t.orderItem,"rndPrice",e)},expression:"orderItem.rndPrice"}})],1)],1)],1)],1)},zt=[],Wt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"vue-suggestion",class:t.wrapperClasses},[r("div",{staticClass:"vue-suggestion-input-group",class:[{"vue-suggestion-selected":t.value},t.inputWrapperClasses]},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.searchText,expression:"searchText"}],ref:"searchText",staticClass:"vue-suggestion-input",class:t.inputClasses,attrs:{placeholder:t.placeholder,disabled:t.disabled,type:"search"},domProps:{value:t.searchText},on:{blur:t.blur,focus:t.focus,input:[function(e){e.target.composing||(t.searchText=e.target.value)},t.inputChange],keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:(e.preventDefault(),t.keyEnter(e))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?null:(e.preventDefault(),t.keyUp(e))},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?null:(e.preventDefault(),t.keyDown(e))}]}}),t._t("searchSlot")],2),t.loading?t._t("loading",[t._v("Loading...")]):t.showList?t._t("suggestionList",[r("div",{ref:"vueSuggestionList",staticClass:"vue-suggestion-list"},[t._l(t.items,(function(e,i){return r("div",{key:e.id,staticClass:"vue-suggestion-list-item",class:[{"vue-suggestion-item-active":i===t.cursor},t.suggestionItemWrapperClasses],on:{click:function(r){return t.selectItem(e)},mouseover:function(e){t.cursor=i}}},[r(t.itemTemplate,{tag:"div",class:t.suggestionItemClasses,attrs:{item:e}})],1)})),r("div",{staticClass:"vue-suggestion-list-item load-more-item",staticStyle:{"text-align":"center"}},[r("button",{staticClass:"btn btn-outline-success btn-sm",on:{click:t.loadMore}},[t._v("Load more")])])],2)]):t._e()],2)},Ut=[],Ht=r("1157"),Kt=r.n(Ht),Gt={name:"VueSuggestion",props:{itemTemplate:{type:Object,required:!0},minLen:{type:Number,default:1},value:{type:[Object,String,Number],default:null},setLabel:{type:Function,default:function(t){return t}},items:{type:Array,default:function(){return[]}},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},placeholder:{type:String,default:""},inputClasses:{type:String,default:""},wrapperClasses:{type:String,default:""},inputWrapperClasses:{type:String,default:""},suggestionListClasses:{type:String,default:""},suggestionGroupClasses:{type:String,default:""},suggestionGroupHeaderClasses:{type:String,default:""},suggestionItemWrapperClasses:{type:String,default:""},suggestionItemClasses:{type:String,default:""}},data:function(){return{searchText:"",showList:!1,cursor:0}},computed:{itemGroups:function(){return this.items.reduce((function(t,e){var r=t.find((function(t){return t.header===e.suggestionGroup}));return r?r.items.push(e):t.push({header:e.suggestionGroup||"",items:[e]}),t}),[])}},watch:{value:{handler:function(t){t&&(this.searchText=this.setLabel(t))},deep:!0},"items.length":function(){this.showList=this.isAbleToShowList();var t=this;Kt()(this.$refs.vueSuggestionList).on("scroll",(function(){Kt()(this).scrollTop()+Kt()(this).innerHeight()>=Kt()(this)[0].scrollHeight&&t.$emit("scrollEnd",t.items.length)}))}},created:function(){this.checkMissingProps()},mounted:function(){this.value&&(this.searchText=this.setLabel(this.value))},methods:{inputChange:function(){var t=this;this.showList=this.isAbleToShowList(),this.cursor=0,M&&window.clearTimeout(M),M=window.setTimeout((function(){t.$emit("onInputChange",t.searchText)}),500)},isAbleToShowList:function(){return!0},checkMissingProps:function(){this.itemTemplate||console.warn("You need to pass `template` as the suggestion list item template")},focus:function(){this.$emit("focus",this.searchText),this.showList=this.isAbleToShowList()},blur:function(){var t=this;this.$emit("blur",this.searchText),E=setTimeout((function(){t.showList=!1}),200)},loadMore:function(){E&&window.clearTimeout(E),Kt()(this.$refs.searchText).focus(),this.$emit("scrollEnd",this.items.length)},selectItem:function(t){t&&(this.searchText=this.setLabel(t),this.$emit("onItemSelected",t)),this.$emit("input",t)},keyUp:function(){this.$emit("keyUp",this.searchText),this.cursor>0&&(this.cursor-=1)},keyDown:function(){this.$emit("keyDown",this.searchText),this.cursor<this.items.length-1?this.cursor+=1:this.$emit("scrollEnd",this.items.length)},keyEnter:function(){this.showList&&this.items[this.cursor]&&(this.selectItem(this.items[this.cursor]),this.showList=!1),this.$emit("onEnter",this.items[this.cursor])}}},Jt=Gt,Yt=(r("b96f"),Object(u["a"])(Jt,Wt,Ut,!1,null,null,null)),Xt=Yt.exports,Zt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("div",[t._v(t._s(t.item.name)+" - "+t._s(t.item.phone||"Not Provided"))]),r("span",[t._v(t._s(t.address))])])},te=[],ee={props:{item:{required:!0}},computed:{address:function(){return(this.item.address||"Not Provided").substring(0,100)}}},re=ee,ie=Object(u["a"])(re,Zt,te,!1,null,null,null),ne=ie.exports,se=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("b-row",[r("b-col",{staticStyle:{overflow:"hidden"},attrs:{sm:"3"}},[r("img",{attrs:{src:t.item.thumbnail,alt:t.item.name.substring(0,20),width:"50px",height:"50px"}})]),r("b-col",{attrs:{sm:"8"}},[t._v("\n      "+t._s(t.item.name)+"\n      "),r("br"),r("span",{staticClass:"h5"},[t._v(t._s(t._f("currency")(t.item.rndPrice,t.vndConfig)))])])],1)],1)},oe=[],ce={props:{item:{required:!0}},computed:{address:function(){return(this.item.address||"Not Provided").substring(0,100)}}},ae=ce,ue=Object(u["a"])(ae,se,oe,!1,null,null,null),le=ue.exports,de={name:"OrderDetailEdit",props:["id","item"],components:{vueSuggestion:Xt,numberInput:Ft},data:function(){return{orderItem:{},sugCustomers:[],sugProducts:[],modalTitle:"",customerSugTemplate:ne,productSugTemplate:le}},mounted:function(){},watch:{item:function(t){this.orderItem=t||{},this.modalTitle=this.orderItem.customer.name?"Edit Order Item":"Add Order Item"}},computed:{},methods:{loadCustomers:function(t,e){var r=this,i=this.$fb.customerCollection.limit(5).orderBy("name");return t&&(i=i.where("nameSearch","array-contains",t.toLowerCase().trim())),e&&(i=i.startAfter(e)),i.get().then((function(t){var e=[];return t.empty||(r.lastSugCustomerVisible=_.last(t.docs),t.forEach((function(t){e.push(t.data())}))),e}))},sugCustomersFocused:function(){var t=this;0==this.sugCustomers.length&&this.loadCustomers().then((function(e){return e.forEach((function(e){return t.sugCustomers.push(e)}))}))},sugCustomersInputChanged:function(t){var e=this;this.customerSugSearchText=t,this.sugCustomers=[],this.lastSugCustomerVisible=void 0,B&&window.clearTimeout(B),B=this.loadCustomers(t).then((function(t){t.forEach((function(t){return e.sugCustomers.push(t)}))}))},loadMoreSugCustomers:function(t){var e=this;this.isLoadingMoreSugCustomer||(this.isLoadingMoreSugCustomer=!0,this.loadCustomers(this.customerSugSearchText,this.lastSugCustomerVisible).then((function(t){t.forEach((function(t){return e.sugCustomers.push(t)})),e.isLoadingMoreSugCustomer=!1})))},sugProductsFocused:function(){var t=this;0==this.sugProducts.length&&this.loadProducts().then((function(e){return e.forEach((function(e){return t.sugProducts.push(e)}))}))},sugProductsInputChanged:function(t){var e=this;this.productSugSearchText=t,this.sugProducts=[],this.lastSugProductVisible=void 0,D&&window.clearTimeout(D),D=this.loadProducts(t).then((function(t){t.forEach((function(t){return e.sugProducts.push(t)}))}))},loadMoreSugProducts:function(t){var e=this;this.isLoadingMoreSugProduct||(this.isLoadingMoreSugProduct=!0,this.loadProducts(this.productSugSearchText,this.lastSugProductVisible).then((function(t){t.forEach((function(t){return e.sugProducts.push(t)})),e.isLoadingMoreSugProduct=!1})))},loadProducts:function(t,e){var r=this,i=this.$fb.productCollection.limit(5).orderBy("name");return t&&(i=i.where("nameSearch","array-contains",t.toLowerCase().trim())),e&&(i=i.startAfter(e)),i.get().then((function(t){var e=[];return t.empty||(r.lastSugProductVisible=_.last(t.docs),t.forEach((function(t){e.push(t.data())}))),e}))},sugProductsItemSelected:function(t){this.orderItem.product.id==t.id?this.orderItem.rndPrice=this.orderItem.rndPrice||t.rndPrice:this.orderItem.rndPrice=t.rndPrice},setLabel:function(t){return t.name},saveOrderItem:function(){this.$emit("saveOrderItem",this.orderItem),this.$bvModal.hide(this.id)}}},me=de,he=Object(u["a"])(me,Rt,zt,!1,null,null,null),fe=he.exports,pe={name:"OrderDetail",components:{numberInput:Ft,vndPrice:O,productDetail:F,orderDetailEditItem:fe},data:function(){return{order:[],counter:{},selectedOrderItem:void 0,fields:[{key:"index",label:"#"},{key:"customer.name",label:"Customer",sortable:!0},{key:"product.name",label:"Product"},{key:"price",label:"Price",class:"text-right"},{key:"quantity",label:"Quantity",class:"text-right"},{key:"total",label:"Total",class:"text-right"},{key:"collectedQuantity",label:"Collected Qty",class:"text-center order-detail-collected-quantity"},{key:"collected",label:"Collected",class:"text-center"},{key:"action",class:"text-right"}],product:{}}},mounted:function(){this.loadOrder()},watch:{},computed:{sumQuantity:function(){return this.order.items&&0!=this.order.items.length?this.order.items.reduce((function(t,e){return t+e.quantity}),0):0},sumCollectedQuantity:function(){return this.order.items&&0!=this.order.items.length?this.order.items.reduce((function(t,e){return t+(e.collectedQuantity||0)}),0):0},sumTotal:function(){return this.order.items&&0!=this.order.items.length?this.order.items.reduce((function(t,e){return t+parseFloat(e.rndPrice||e.product.rndPrice)*parseFloat(e.quantity)}),0):0}},methods:{loadOrder:function(){var t=this;this.$fb.orderCollection.doc(this.$route.params.id).onSnapshot((function(e){e.empty||(t.order=e.data(),t.order.items=Mt.a.sortBy(t.order.items||[],(function(t){return t.dateCreated})))}))},addNewOrderItem:function(){this.selectedOrderItem={id:(new Date).getTime(),customer:{name:""},product:{name:""},quantity:1,collectedQuantity:0},this.$bvModal.show("editItem")},orderItemClicked:function(t){},editOrderItem:function(t){this.selectedOrderItem=Object(v["a"])({},t),this.selectedOrderItem.oriPrice=this.selectedOrderItem.oriPrice||this.selectedOrderItem.product.oriPrice,this.selectedOrderItem.rndPrice=this.selectedOrderItem.rndPrice||this.selectedOrderItem.product.rndPrice,this.$bvModal.show("editItem")},deleteOrderItem:function(t){var e=this,r=Mt.a.find(this.order.items,(function(e){return e.id==t.id}));r&&this.$bvModal.msgBoxConfirm("Are you sure you want to delete [".concat(r.quantity," - ").concat(r.product.name,"] of [").concat(r.customer.name,"]?")).then((function(r){if(r){var i=Mt.a.findIndex(e.order.items,(function(e){return e.id==t.id}));e.order.items.splice(i,1),e.$fb.orderCollection.doc(e.order.id).set(e.order).then((function(){return e.selectedOrderItem=void 0}))}})).catch((function(t){console.log(t)}))},saveOrderItem:function(t){var e=this;if(console.log("saveOrderItem",t),t.product&&t.customer){delete t.customer.nameSearch,delete t.product.nameSearch,t.quantity=parseFloat(t.quantity),this.order.items=this.order.items||[];var r=this.order.items.findIndex((function(e){return e.id==t.id}));return r>-1?(t.dateModified=new Date,this.order.items.splice(r,1,t)):(t.dateCreated=new Date,this.order.items.push(t)),this.$fb.orderCollection.doc(this.order.id).set(this.order).then((function(){e.selectedOrderItem=void 0}))}},saveAndAddOrderItem:function(){this.saveOrderItem().then(this.addNewOrderItem)},cancelOrderItem:function(){this.selectedOrderItem=void 0},calculateTotalOrderItem:function(t){return parseFloat(t.quantity)*parseFloat(t.rndPrice||t.product.rndPrice)},collectedChanged:function(t,e){e.collected=t,e.collectedQuantity=t?e.quantity:0;var r=this.order.items.findIndex((function(t){return t.id==e.id}));r>-1&&(e.dateModified=new Date,this.order.items.splice(r,1,e),this.$fb.orderCollection.doc(this.order.id).set(this.order))},goToCollectionPage:function(){this.$router.push({name:"OrderDetailCollection",params:{id:this.order.id}})},goToShipmentPage:function(){this.$router.push({name:"OrderDetailShipment",params:{id:this.order.id}})},goToOrderList:function(){this.$router.push({name:"Orders"})},collectedQuantityChanged:function(t,e){var r=this;t.collectedQuantity=e,t.collected=t.collectedQuantity==t.quantity,N&&window.clearTimeout(N),N=window.setTimeout((function(){return r.$fb.orderCollection.doc(r.order.id).set(r.order)}),1e3)},showProductDetailModal:function(t){var e=this,r=t.product.id;this.$fb.productCollection.doc(r).get().then((function(t){e.product=t.data(),e.$bvModal.show("productEdit")}))},productSaved:function(t){}}},be=pe,ve=Object(u["a"])(be,Ot,Tt,!1,null,null,null),ge=ve.exports,ye=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"animated fadeIn"},[r("b-row",[r("b-col",[r("b-card",[r("div",{attrs:{slot:"header"},slot:"header"},[r("b-link",{on:{click:t.goToOrderList}},[r("i",{staticClass:"fa fa-server"}),t._v(" Order:\n          ")]),r("strong",[t._v(t._s(t.order.name))]),r("div",{staticClass:"pull-right"},[r("b-link",{staticClass:"mr-3",on:{click:t.goToOrderDetailPage}},[t._v("Order Detail Page")])],1)],1),r("b-table",{attrs:{"foot-clone":"",responsive:"sm",items:t.items,fields:t.fields,small:!0},scopedSlots:t._u([{key:"cell(index)",fn:function(e){return[t._v(t._s(e.index+1))]}},{key:"cell(total)",fn:function(e){return[t._v(t._s(t._f("currency")(t.calculateTotalOrderItem(e.item),t.vndConfig)))]}},{key:"cell(name)",fn:function(e){return[t._v("\n            "+t._s(e.item.name)+"\n            "),r("br"),r("strong",[t._v("CW:")]),t._v("\n            "+t._s(t._f("currency")(e.item.product.cwSalePrice?e.item.product.cwSalePrice:e.item.product.cwPrice,t.audConfig))+"\n            "),e.item.product.cwSalePricePick?r("b-badge",{attrs:{variant:"success"}},[t._v("CW Sale")]):t._e(),t._v("-\n            "),r("strong",[t._v("BV:")]),t._v("\n            "+t._s(t._f("currency")(e.item.product.bvSalePrice?e.item.product.bvSalePrice:e.item.product.bvPrice,t.audConfig))+"\n            "),e.item.product.bvSalePricePick?r("b-badge",{attrs:{variant:"success"}},[t._v("BV Sale")]):t._e()]}},{key:"cell(collectedQuantity)",fn:function(e){return[r("number-input",{attrs:{min:0,max:e.item.quantity,inline:"",controls:"",center:"",size:"sm"},on:{change:function(r){return t.collectedQuantityChanged(e.item,r)}},model:{value:e.item.collectedQuantity,callback:function(r){t.$set(e.item,"collectedQuantity",r)},expression:"data.item.collectedQuantity"}})]}},{key:"cell(collected)",fn:function(e){return[r("b-form-checkbox",{on:{change:function(r){return t.collectedChanged(r,e.item)}},model:{value:e.item.collected,callback:function(r){t.$set(e.item,"collected",r)},expression:"data.item.collected"}})]}},{key:"cell(action)",fn:function(e){return[r("b-button",{staticClass:"mr-1",attrs:{type:"submit",size:"sm",variant:"success"}},[r("i",{staticClass:"fa fa-edit"}),t._v(" Edit\n            ")]),r("b-button",{attrs:{type:"submit",size:"sm",variant:"danger"},on:{click:function(r){return t.deleteOrderItem(e.item)}}},[r("i",{staticClass:"fa fa-remove"}),t._v(" Delete\n            ")])]}},{key:"foot()",fn:function(t){}},{key:"foot(quantity)",fn:function(e){return[t._v(t._s(t.sumQuantity))]}},{key:"foot(collectedQuantity)",fn:function(e){return[t._v(t._s(t.sumCollectedQuantity))]}}])})],1)],1)],1)],1)},Ce=[],_e=(r("cadf"),{name:"OrderDetail",components:{numberInput:Ft},data:function(){return{order:{},items:[],fields:[{key:"index",label:"#",class:"collection-index"},{key:"name",label:"Product"},{key:"quantity",label:"Quantity",class:"text-right collection-qty"},{key:"collectedQuantity",label:"Collected Qty",class:"text-center collection-collected-qty"},{key:"collected",label:"Collected",class:"text-center collection-collected"}]}},mounted:function(){this.loadOrder()},computed:{sumQuantity:function(){return this.items&&0!==this.items.length?Mt.a.sumBy(this.items,(function(t){return t.quantity})):0},sumCollectedQuantity:function(){return this.items&&0!==this.items.length?Mt.a.sumBy(this.items,(function(t){return t.collectedQuantity})):0}},methods:{loadOrder:function(){var t=this;this.$fb.orderCollection.doc(this.$route.params.id).onSnapshot((function(e){e.empty||(t.order=e.data(),t.items=Mt.a.chain(t.order.items).map((function(t){return{id:t.id,name:t.product.name,quantity:t.quantity,collectedQuantity:t.collectedQuantity,product:t.product,collected:t.collected}})).groupBy((function(t){return t.name})).mapValues((function(t){var e={name:Mt.a.first(t).name,product:Mt.a.first(t).product,quantity:Mt.a.sumBy(t,(function(t){return parseFloat(t.quantity)})),collectedQuantity:Mt.a.sumBy(t,(function(t){return parseFloat(t.collectedQuantity)})),orderItemIds:Mt.a.reduce(t,(function(t,e){return t.concat(e.id)}),[])};return e.collected=e.quantity==e.collectedQuantity,e})).values().value())}))},goToOrderDetailPage:function(){this.$router.push({name:"OrderDetail",params:{id:this.order.id}})},collectedChanged:function(t,e){e.collectedQuantity=t?e.quantity:0,this.setCollectedItem(e)},setCollectedItem:function(t){var e=t.orderItemIds,r=t.collectedQuantity;this.order.items.filter((function(t){return e.indexOf(t.id)>-1})).forEach((function(t){t.collectedQuantity=0,t.collected=!1,r>0&&(r>t.quantity?(t.collectedQuantity=t.quantity,t.collected=!0,r-=t.quantity):(t.collectedQuantity=r,r=0,t.collected=t.collectedQuantity==t.quantity))})),this.debounceSaveOrder()},goToOrderList:function(){this.$router.push({name:"Orders"})},collectedQuantityChanged:function(t,e){t.collectedQuantity=e,this.setCollectedItem(t)},debounceSaveOrder:function(){var t=this;L&&window.clearTimeout(L),L=window.setTimeout((function(){return t.$fb.orderCollection.doc(t.order.id).set(t.order)}),500)}}}),Pe=_e,ke=Object(u["a"])(Pe,ye,Ce,!1,null,null,null),we=ke.exports,xe=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"animated fadeIn"},[r("b-row",[r("b-col",[r("b-card",[r("div",{attrs:{slot:"header"},slot:"header"},[r("b-link",{on:{click:t.goToOrderList}},[r("i",{staticClass:"fa fa-server"}),t._v(" Order:\n          ")]),r("strong",[t._v(t._s(t.order.name))]),r("div",{staticClass:"pull-right"},[r("b-link",{staticClass:"mr-3",on:{click:t.updateCustomerInformation}},[t._v("Update Customer Information")]),r("b-link",{staticClass:"mr-3",on:{click:t.goToOrderDetailPage}},[t._v("Order Detail Page")])],1)],1),r("b-table",{attrs:{"foot-clone":"",responsive:"sm",items:t.items,fields:t.fields,small:!0,hover:!0},scopedSlots:t._u([{key:"cell(index)",fn:function(e){return[t._v(t._s(e.index+1))]}},{key:"cell(customerName)",fn:function(e){return[r("b-link",{on:{click:function(r){return t.editCustomer(e)}}},[t._v(t._s(e.value))]),e.item.customerId?t._e():r("b-link",{staticClass:"ml-1",on:{click:function(r){return t.updateCustomer(e.item)}}},[t._v("[Update Info]")])]}},{key:"cell(products)",fn:function(e){return[r("table",{staticClass:"table table-borderless product-table"},t._l(e.item.products,(function(e,i){return r("tr",{key:i},[r("td",[t._v(t._s(e.productName))]),r("td",{staticClass:"text-right",staticStyle:{width:"5%"}},[t._v(t._s(e.quantity))]),r("td",{staticClass:"text-right",staticStyle:{width:"25%"}},[t._v(t._s(t._f("currency")(e.total,t.vndConfig)))])])})),0)]}},{key:"cell(productPrice)",fn:function(e){return t._l(e.item.products,(function(e,i){return r("div",{key:i},[r("span",[t._v(t._s(t._f("currency")(e.total,t.vndConfig)))])])}))}},{key:"cell(quantity)",fn:function(e){return[r("strong",[t._v(t._s(e.value))])]}},{key:"cell(total)",fn:function(e){return[r("strong",[t._v(t._s(t._f("currency")(e.value,t.vndConfig)))])]}},{key:"cell(purchased)",fn:function(e){return[r("b-form-checkbox",{on:{change:function(r){return t.purchasedChanged(r,e)}},model:{value:e.item.purchased,callback:function(r){t.$set(e.item,"purchased",r)},expression:"data.item.purchased"}})]}},{key:"cell(action)",fn:function(e){return[r("b-button",{attrs:{type:"submit",size:"sm",variant:"success"},on:{click:function(r){return t.editShipmentItem(e)}}},[r("i",{staticClass:"fa fa-edit"}),t._v(" Edit\n            ")])]}},{key:"foot()",fn:function(t){}},{key:"foot(quantity)",fn:function(e){return[t._v(t._s(t.sumQuantity))]}},{key:"foot(total)",fn:function(e){return[t._v(t._s(t._f("currency")(t.sumTotal,t.vndConfig)))]}},{key:"foot(purchased)",fn:function(e){return[t._v(t._s(t._f("currency")(t.sumPurchased,t.vndConfig)))]}}])})],1)],1)],1),r("order-detail-shipment-edit-item",{attrs:{id:"shipmentEditItem",item:t.selectedShipmentItem},on:{saveShipmentItem:t.saveShipmentItem}}),r("customer-edit",{attrs:{id:"customerEdit",item:this.selectedCustomer}})],1)},Se=[],$e=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-modal",{attrs:{id:t.id,title:"Shipment Item",size:"lg"},on:{ok:t.saveShipmentItem}},[r("b-row",[r("b-col",{attrs:{sm:"12"}},[r("b-form-group",[r("label",[t._v("Note")]),r("b-form-input",{attrs:{type:"text"},model:{value:t.shipmentItem.note,callback:function(e){t.$set(t.shipmentItem,"note",e)},expression:"shipmentItem.note"}})],1)],1),r("b-col",{attrs:{sm:"12"}},[r("b-form-group",[r("label",[t._v("Address")]),r("b-form-input",{attrs:{type:"text"},model:{value:t.shipmentItem.address,callback:function(e){t.$set(t.shipmentItem,"address",e)},expression:"shipmentItem.address"}})],1)],1),r("b-col",{attrs:{sm:"12"}},[r("b-form-group",[r("label",[t._v("Phone")]),r("b-form-input",{attrs:{type:"text"},model:{value:t.shipmentItem.phone,callback:function(e){t.$set(t.shipmentItem,"phone",e)},expression:"shipmentItem.phone"}})],1)],1)],1)],1)},Ie=[],Oe={name:"OrderDetail",props:["id","item"],components:{},data:function(){return{shipmentItem:{}}},watch:{item:function(t){this.shipmentItem=t||{}}},mounted:function(){},computed:{},methods:{saveShipmentItem:function(){this.$emit("saveShipmentItem",this.shipmentItem),this.$bvModal.hide(this.id)}}},Te=Oe,Ee=Object(u["a"])(Te,$e,Ie,!1,null,"7c39920c",null),Me=Ee.exports,De=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("b-modal",{attrs:{id:t.id,title:"Customer Detail",size:"lg"},on:{ok:t.saveCustomer}},[r("b-row",[r("b-col",{attrs:{sm:"12"}},[r("b-form-group",[r("label",[t._v("Name")]),r("b-form-input",{attrs:{type:"text"},model:{value:t.customer.name,callback:function(e){t.$set(t.customer,"name",e)},expression:"customer.name"}})],1)],1),r("b-col",{attrs:{sm:"12"}},[r("b-form-group",[r("label",[t._v("Address")]),r("b-form-input",{attrs:{type:"text"},model:{value:t.customer.address,callback:function(e){t.$set(t.customer,"address",e)},expression:"customer.address"}})],1)],1),r("b-col",{attrs:{sm:"12"}},[r("b-form-group",[r("label",[t._v("Phone")]),r("b-form-input",{attrs:{type:"text"},model:{value:t.customer.phone,callback:function(e){t.$set(t.customer,"phone",e)},expression:"customer.phone"}})],1)],1)],1)],1)},Be=[],Ne={name:"CustomerEdit",props:["id","item"],components:{},data:function(){return{customer:{}}},watch:{item:function(t){var e=this;this.customer=t||{},this.customer.id&&this.$fb.customerCollection.doc(this.customer.id).get().then((function(t){return e.customer=t.data()}))}},mounted:function(){},computed:{},methods:{saveCustomer:function(){var t=this;this.customer.nameSearch=T(this.customer.name),this.customer.version=(this.customer.version||0)+1,this.$fb.customerCollection.doc(this.customer.id).set(this.customer).then((function(){t.$emit("customerSaved",t.customer),t.$bvModal.hide(t.id)}))}}},Le=Ne,qe=Object(u["a"])(Le,De,Be,!1,null,"2daaf116",null),Ae=qe.exports,Qe={name:"OrderDetail",components:{numberInput:Ft,orderDetailShipmentEditItem:Me,customerEdit:Ae},data:function(){return{order:{},items:[],selectedShipmentItem:{},selectedCustomer:{},fields:[{key:"index",label:"#",class:"shipment-index-col"},{key:"customerName",label:"Customer",class:"shipment-customer-col"},{key:"products",label:"Products",class:"shipment-product-col"},{key:"quantity",label:"Total Qty",class:"text-center shipment-quantity-col",tdClass:"vertical-middle"},{key:"total",label:"Total Price",class:"text-right shipment-price-col"},{key:"purchased",label:"Purchased",class:"text-center shipment-purchased-col"},{key:"note",label:"Note",class:"shipment-note-col"},{key:"address",label:"Address",class:"shipment-address-col"},{key:"phone",label:"Phone",class:"shipment-phone-col"},{key:"action",label:"Action",class:"text-right shipment-action-col"}]}},mounted:function(){this.loadOrder()},computed:{sumQuantity:function(){return this.items&&0!==this.items.length?Mt.a.sumBy(this.items,(function(t){return t.quantity})):0},sumTotal:function(){return this.items&&0!==this.items.length?Mt.a.sumBy(this.items,(function(t){return t.total})):0},sumPurchased:function(){return this.items&&0!==this.items.length?Mt.a.chain(this.items).filter((function(t){return t.purchased})).sumBy((function(t){return t.total})).value():0}},methods:{loadOrder:function(){var t=this;this.$fb.orderCollection.doc(this.$route.params.id).onSnapshot((function(e){e.empty||(t.order=e.data(),t.buildItems(t.order))}))},buildItems:function(t){this.items=Mt.a.chain(t.items).map((function(t){return{id:t.id,customerId:t.customer.id,note:t.note,customerName:t.customer.name,address:t.customer.address,phone:t.customer.phone,purchased:t.purchased,productName:t.product.name,quantity:t.quantity,rndPrice:t.rndPrice||t.product.rndPrice,total:parseFloat(t.quantity||0)*parseFloat(t.rndPrice||t.product.rndPrice||0)}})).groupBy((function(t){return t.customerName})).mapValues((function(t){var e={note:Mt.a.first(t).note,customerId:Mt.a.first(t).customerId,customerName:Mt.a.first(t).customerName,address:Mt.a.first(t).address,phone:Mt.a.first(t).phone,purchased:Mt.a.first(t).purchased,quantity:Mt.a.sumBy(t,(function(t){return t.quantity})),total:Mt.a.sumBy(t,(function(t){return t.total})),products:Mt.a.reduce(t,(function(t,e){return t.concat(e)}),[])};return e})).values().sortBy((function(t){return t.customerName})).value()},goToOrderDetailPage:function(){this.$router.push({name:"OrderDetail",params:{id:this.order.id}})},collectedChanged:function(t,e){e.collectedQuantity=t?e.quantity:0,this.setCollectedItem(e)},setCollectedItem:function(t){var e=t.orderItemIds,r=t.collectedQuantity;this.order.items.filter((function(t){return e.indexOf(t.id)>-1})).forEach((function(t){t.collectedQuantity=0,t.collected=!1,r>0&&(r>t.quantity?(t.collectedQuantity=t.quantity,t.collected=!0,r-=t.quantity):(t.collectedQuantity=r,r=0,t.collected=t.collectedQuantity==t.quantity))})),this.debounceSaveOrder()},goToOrderList:function(){this.$router.push({name:"Orders"})},collectedQuantityChanged:function(t,e){t.collectedQuantity=e,this.setCollectedItem(t)},debounceSaveOrder:function(){var t=this;q&&window.clearTimeout(q),q=window.setTimeout((function(){return t.$fb.orderCollection.doc(t.order.id).set(t.order)}),500)},updateCustomerInformation:function(){var t=this;this.$bvModal.msgBoxConfirm("Are you sure you want to update all Customer's informations?").then((function(e){e&&t.items.forEach(t.updateCustomer)})).catch((function(t){console.log(t)}))},updateCustomer:function(t){var e=this,r=this.$fb.customerCollection;r=t.customerId?r.doc(t.customerId):r.where("name","==",t.customerName),r.get().then((function(e){var r;return r=t.customerId?e.data():Mt.a.first(e.docs).data(),delete r.nameSearch,r})).then((function(t){var r=Mt.a.keys(Mt.a.pickBy(e.order.items,(function(e){return e.customer.id==t.id||e.customer.name==t.name})));return r.forEach((function(r){var i=e.order.items[r];i.customer=t,e.order.items.splice(r,1,i)})),e.$fb.orderCollection.doc(e.order.id).set(e.order),e.order})).then(this.buildItems)},purchasedChanged:function(t,e){var r=this,i=e.index,n=e.item;n.purchased=t,this.items.splice(i,1,n);var s=Mt.a.keys(Mt.a.pickBy(this.order.items,(function(t){return t.customer.id==n.customerId||t.customer.name==n.customerName})));s.forEach((function(e){return r.order.items[e].purchased=t})),this.debounceSaveOrder()},editShipmentItem:function(t){var e=t.index,r=t.item;this.selectedShipmentItem=Object(v["a"])({},r),this.selectedShipmentItemIndex=e,this.$bvModal.show("shipmentEditItem")},saveShipmentItem:function(t){var e=this;console.log(t),this.items.splice(this.selectedShipmentItemIndex,1,t);var r=Mt.a.keys(Mt.a.pickBy(this.order.items,(function(e){return e.customer.id==t.customerId||e.customer.name==t.customerName})));r.forEach((function(r){e.order.items[r].note=t.note,e.order.items[r].customer.address=t.address,e.order.items[r].customer.phone=t.phone})),this.debounceSaveOrder()},editCustomer:function(t){t.index;var e=t.item,r=e.customerId,i=e.customerName,n=e.address,s=e.phone;this.selectedCustomer={id:r,name:i,address:n,phone:s},this.$bvModal.show("customerEdit")}}},je=Qe,Ve=(r("c1c5"),Object(u["a"])(je,xe,Se,!1,null,"5799bc72",null)),Fe=Ve.exports,Re=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"animated fadeIn"},[r("b-card",[r("div",{attrs:{slot:"header"},slot:"header"},[r("i",{staticClass:"cui-user icons font-lg"}),t._v("\n      "+t._s(t.order.name)+" Statistic\n    ")]),r("b-row",[r("b-col",{attrs:{sm:"12",md:"6"}},[r("table",{staticClass:"table table-response"},[r("tr",{staticClass:"no-border-top"},[r("td",[t._v("Buying")]),r("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(t.totalBuying,t.audConfig)))])]),r("tr",[r("td",[t._v("\n              Ship VN Fee\n              "),r("a",{attrs:{href:"javascript:void(0)"},on:{click:t.changeShipFee}},[t._v("[Change]")])]),t.isChangingShipFee?r("td",{staticClass:"text-right"},[r("b-input-group",[r("b-form-input",{model:{value:t.order.shipFee,callback:function(e){t.$set(t.order,"shipFee",e)},expression:"order.shipFee"}}),r("b-input-group-append",[r("b-button",{attrs:{variant:"outline-success"},on:{click:t.saveShipFee}},[t._v("Save")])],1)],1)],1):r("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(t.order.shipFee,t.audConfig)))])]),r("tr",[r("td",[t._v("Total")]),r("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(t.total,t.audConfig)))])]),r("tr",[r("td",[t._v("\n              Current Rate\n              "),r("a",{attrs:{href:"javascript:void(0)"},on:{click:t.changeCurrentRate}},[t._v("[Change]")])]),t.isChangingCurrentRate?t._e():r("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(t.order.currentRate,t.vndConfig)))]),t.isChangingCurrentRate?r("td",{staticClass:"text-right"},[r("b-input-group",[r("b-form-input",{model:{value:t.order.currentRate,callback:function(e){t.$set(t.order,"currentRate",e)},expression:"order.currentRate"}}),r("b-input-group-append",[r("b-button",{attrs:{variant:"outline-success"},on:{click:t.saveCurrentRate}},[t._v("Save")])],1)],1)],1):t._e()]),r("tr",[r("td",[t._v("Total VND")]),r("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(t.totalVND,t.vndConfig)))])]),r("tr",[r("td",[t._v("Profit")]),r("td",{staticClass:"text-right"},[r("strong",[t._v(t._s(t._f("currency")(t.profit,t.vndConfig)))])])])])]),r("b-col",{attrs:{sm:"12",md:"6"}},[r("b-form-group",[r("label",[t._v("Note")]),r("b-form-textarea",{attrs:{placeholder:"Enter something...",rows:"6"},model:{value:t.order.note,callback:function(e){t.$set(t.order,"note",e)},expression:"order.note"}})],1),r("b-button",{attrs:{type:"submit",size:"sm",variant:"success"},on:{click:t.saveOrder}},[t._v("Save")])],1)],1)],1)],1)},ze=[],We={name:"Orders",components:{},data:function(){return{order:[],counter:{},totalBuying:0,total:0,totalVND:0,profit:0,isChangingShipFee:!1,isChangingCurrentRate:!1}},mounted:function(){this.loadOrder()},watch:{"$route.params.id":function(){this.loadOrder()}},computed:{},methods:{loadOrder:function(){var t=this,e=this.$route.params.id;this.$fb.orderCollection.doc(e).onSnapshot((function(e){e.empty||(t.order=e.data(),t.calculateStatistic(t.order))}))},calculateStatistic:function(t){this.totalBuying=_.sumBy(t.items,(function(t){return parseFloat(t.product.buyPrice||0)*parseFloat(t.quantity||0)})),this.total=this.totalBuying+(t&&t.shipFee||0),this.totalVND=this.total*(t&&t.currentRate||16500),this.profit=this.sumTotal(t)-this.totalVND},sumQuantity:function(t){return t.items&&0!=t.items.length?t.items.reduce((function(t,e){return t+e.quantity}),0):0},sumTotal:function(t){return t.items&&0!=t.items.length?t.items.reduce((function(t,e){return t+e.quantity*parseFloat(e.rndPrice||e.product.rndPrice)}),0):0},changeShipFee:function(){this.isChangingShipFee=!0},changeCurrentRate:function(){this.isChangingCurrentRate=!0},saveShipFee:function(){this.order.shipFee=parseFloat(this.order.shipFee),this.isChangingShipFee=!1,this.saveOrder()},saveCurrentRate:function(){this.order.currentRate=parseFloat(this.order.currentRate),this.saveOrder()},saveOrder:function(){var t=this;this.$fb.orderCollection.doc(this.order.id).set(this.order).then((function(e){t.isChangingCurrentRate=!1}))}}},Ue=We,He=(r("d7d0"),Object(u["a"])(Ue,Re,ze,!1,null,"981ef7fe",null)),Ke=He.exports,Ge=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"animated fadeIn"},[r("b-card",[r("div",{attrs:{slot:"header"},slot:"header"},[t._v("Calculate Price")]),r("b-form",[r("b-form-group",{attrs:{label:"Price ($A)"}},[r("b-form-input",{attrs:{type:"text",placeholder:"Enter price"},model:{value:t.price,callback:function(e){t.price=e},expression:"price"}})],1),r("b-form-group",{attrs:{label:"Weight(g)",description:"100g = $1"}},[r("b-form-input",{attrs:{type:"text",placeholder:"Enter weight"},model:{value:t.weight,callback:function(e){t.weight=e},expression:"weight"}})],1),r("b-form-group",{attrs:{label:"Suggested Price (Price + 10% + Ship + 2)"}},[t._v("\n        ("+t._s(t._f("currency")(t.price,t.audConfig))+" + "+t._s(t._f("currency")(.1*t.price,t.audConfig))+" + "+t._s(t._f("currency")(t.weight/100,t.audConfig))+" + "+t._s(t._f("currency")(2,t.audConfig))+") * "+t._s(t._f("currency")(16500,t.vndConfig))+"\n        "),r("strong",[t._v("= "+t._s(t._f("currency")(t.sugPrice,t.vndConfig)))])])],1)],1)],1)},Je=[],Ye={name:"Utils",components:{},data:function(){return{price:"",weight:""}},mounted:function(){},computed:{sugPrice:function(){var t=parseFloat(this.price||0),e=parseFloat(this.weight||0);return 16500*(t+.1*t+e/100+2)}},methods:{}},Xe=Ye,Ze=Object(u["a"])(Xe,Ge,Je,!1,null,null,null),tr=Ze.exports,er=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"app flex-row align-items-center"},[r("div",{staticClass:"container"},[r("b-row",{staticClass:"justify-content-center"},[r("b-col",{attrs:{md:"8"}},[r("b-card-group",[r("b-card",{staticClass:"p-4",attrs:{"no-body":""}},[r("b-card-body",[r("b-form",{on:{submit:t.login}},[r("h1",[t._v("Login")]),r("p",{staticClass:"text-muted"},[t._v("Sign In to your account")]),r("b-input-group",{staticClass:"mb-3"},[r("b-input-group-prepend",[r("b-input-group-text",[r("i",{staticClass:"fa fa-user"})])],1),r("b-form-input",{staticClass:"form-control",attrs:{type:"text",placeholder:"Username",autocomplete:"username email"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1),r("b-input-group",{staticClass:"mb-4"},[r("b-input-group-prepend",[r("b-input-group-text",[r("i",{staticClass:"fa fa-lock"})])],1),r("b-form-input",{staticClass:"form-control",attrs:{type:"password",placeholder:"Password",autocomplete:"current-password"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1),t.showError?r("p",[r("i",{staticStyle:{color:"red"}},[t._v("Wrong username or password")])]):t._e(),r("b-row",[r("b-col",{attrs:{cols:"6"}},[r("b-button",{staticClass:"px-4",attrs:{variant:"primary"},on:{click:t.login}},[t._v("Login")])],1),r("b-col",{staticClass:"text-right",attrs:{cols:"6"}},[r("b-button",{staticClass:"px-0",attrs:{variant:"link"}},[t._v("Forgot password?")])],1)],1)],1)],1)],1),r("b-card",{staticClass:"text-white bg-primary py-5 d-md-down-none",staticStyle:{width:"44%"},attrs:{"no-body":""}},[r("b-card-body",{staticClass:"text-center"},[r("div",[r("h2",[t._v("Chemist Order Management")])])])],1)],1)],1)],1)],1)])},rr=[],ir={name:"Login",data:function(){return{email:"",password:"",showError:!1}},methods:{login:function(){var t=this;this.$fb.auth.signInWithEmailAndPassword(this.email,this.password).then((function(){t.$router.replace("dashboard")})).catch((function(e){return t.showError=!0}))}}},nr=ir,sr=Object(u["a"])(nr,er,rr,!1,null,null,null),or=sr.exports,cr=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"animated fadeIn"})},ar=[],ur={name:"Shipments",components:{},data:function(){return{order:{},orderItems:[]}},mounted:function(){},computed:{},methods:{loadOrder:function(){var t=this;this.$fb.orderCollection.doc(this.$route.params.id).onSnapshot((function(e){e.empty||(t.order=e.data(),t.orderItems=_.chain(t.order.items).groupBy((function(t){return t.customer.name})).value(),console.log(t.orderItems))}))}}},lr=ur,dr=Object(u["a"])(lr,cr,ar,!1,null,null,null),mr=dr.exports,hr=function(){return Promise.all([r.e("chunk-40f4cc33"),r.e("chunk-e57b56ca")]).then(r.bind(null,"e8c5"))},fr=function(){return Promise.all([r.e("chunk-40f4cc33"),r.e("chunk-2d0d63f1")]).then(r.bind(null,"7277"))};function pr(){return[{path:"/",redirect:"/dashboard",name:"Home",component:hr,meta:{requiresAuth:!0},children:[{path:"dashboard",name:"Dashboard",component:fr,meta:{title:"Dashboard"}},{path:"products",name:"Products",component:st,meta:{title:"Products"}},{path:"customers",name:"Customers",component:dt,meta:{title:"Customers"}},{path:"orders",name:"Orders",component:It,meta:{title:"Orders"},children:[{path:":id/statistic",name:"OrderStatistic",component:Ke}]},{path:"orders/:id",name:"OrderDetail",component:ge,meta:{title:"Order Detail"}},{path:"orders/:id/collectionpage",name:"OrderDetailCollection",component:we,meta:{title:"Order Detail Collection"}},{path:"orders/:id/shipment",name:"OrderDetailShipment",component:Fe,meta:{title:"Order Detail Shipment"}},{path:"shipments",name:"Shipments",component:mr,meta:{title:"Shipments"}},{path:"utils",name:"UtilsPage",component:tr,meta:{title:"Utils"}}]},{path:"/login",name:"Login",component:or,meta:{requiresAuth:!1,title:"Login"}}]}i["default"].use(m["a"]);var br=new m["a"]({mode:"hash",linkActiveClass:"open active",scrollBehavior:function(){return{y:0}},routes:pr()});br.beforeEach((function(t,e,r){var i=f.a.auth().currentUser,n=t.matched.some((function(t){return t.meta.requiresAuth}));document.title=t.matched.reduce((function(t,e){return e.meta.title?e.meta.title:""}),""),n&&!i?r("login"):r()}));var vr=br;r("f576");i["default"].filter("date",(function(t){return(t.getDate()+"").padStart(2,0)+"/"+(t.getMonth()+1+"").padStart(2,0)+"/"+t.getFullYear()}));var gr=r("bc3a"),yr=r.n(gr),Cr=(r("96cf"),r("3b8d")),_r=(r("551c"),r("e71f"),{apiKey:"AIzaSyBpo4IlT4YWHPf6Kb1ws6KgzfbxQurgPIQ",authDomain:"chemistorder-fac70.firebaseapp.com",databaseURL:"https://chemistorder-fac70.firebaseio.com",projectId:"chemistorder-fac70",storageBucket:"chemistorder-fac70.appspot.com",messagingSenderId:"1018979807432",appId:"1:1018979807432:web:7f91bee1f9f50d792e35fd"});f.a.initializeApp(_r);var Pr=f.a.firestore(),kr=f.a.auth(),wr=kr.currentUser,xr=Pr.collection("products"),Sr=Pr.collection("customers"),$r=Pr.collection("orders"),Ir=Pr.collection("counter"),Or=void 0;function Tr(){return new Promise((function(t){Or?t(Or):Ir.limit(1).onSnapshot((function(e){return e.forEach((function(e){Or=e.data(),t(Or)}))}))}))}Tr();var Er={getCustomerCount:function(){var t=Object(Cr["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Tr();case 2:return t.abrupt("return",Or.customerCount);case 3:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),increaseCustomer:function(){var t=Object(Cr["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Tr();case 2:return Or.customerCount++,Ir.doc(Or.id).set(Or),t.abrupt("return",Or.customerCount);case 5:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),decreaseCustomer:function(){var t=Object(Cr["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Tr();case 2:return Or.customerCount--,Ir.doc(Or.id).set(Or),t.abrupt("return",Or.customerCount);case 5:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),getProductCount:function(){var t=Object(Cr["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Tr();case 2:return t.abrupt("return",Or.productCount);case 3:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),increaseProduct:function(){var t=Object(Cr["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Tr();case 2:return Or.productCount++,Ir.doc(Or.id).set(Or),t.abrupt("return",Or.productCount);case 5:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}(),decreaseProduct:function(){var t=Object(Cr["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Tr();case 2:return Or.productCount--,Ir.doc(Or.id).set(Or),t.abrupt("return",Or.productCount);case 5:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},Mr={db:Pr,auth:kr,currentUser:wr,productCollection:xr,customerCollection:Sr,orderCollection:$r,counterCollection:Ir,counterService:Er},Dr=r("7345"),Br=r.n(Dr);i["default"].prototype.$fb=Mr,i["default"].prototype.vndConfig={symbol:"VND",thousandsSeparator:",",fractionCount:0,fractionSeparator:".",symbolPosition:"after",symbolSpacing:!0},i["default"].prototype.audConfig={symbol:"$",thousandsSeparator:",",fractionCount:2,fractionSeparator:".",symbolPosition:"front",symbolSpacing:!1},i["default"].prototype.$http=yr.a,i["default"].prototype.appSettings={commissionRate:1.1,vndExchageRate:16500,ctvCommissionRate:1.08,buyingFee:2,cwCheckPriceApi:"http://45.77.96.178/lamdam?term={term}",cwProductThumbnailUrl150:"https://static.chemistwarehouse.com.au/ams/media/pi/{id}/hero_150.jpg"},i["default"].use(n["a"]),i["default"].use(Br.a);var Nr="";Mr.auth.onAuthStateChanged((function(){Nr||(Nr=new i["default"]({el:"#app",router:vr,template:"<App/>",components:{App:d}}))}))},"5c0b":function(t,e,r){"use strict";var i=r("e332"),n=r.n(i);n.a},"6b63":function(t,e,r){"use strict";var i=r("cdcb"),n=r.n(i);n.a},"7c18":function(t,e,r){},ac6b:function(t,e,r){},b12d:function(t,e,r){"use strict";var i=r("7c18"),n=r.n(i);n.a},b7cf:function(t,e,r){"use strict";var i=r("f188"),n=r.n(i);n.a},b96f:function(t,e,r){"use strict";var i=r("c932"),n=r.n(i);n.a},c1c5:function(t,e,r){"use strict";var i=r("ac6b"),n=r.n(i);n.a},c551:function(t,e,r){},c932:function(t,e,r){},cdc0:function(t,e,r){"use strict";var i=r("c551"),n=r.n(i);n.a},cdcb:function(t,e,r){},d7d0:function(t,e,r){"use strict";var i=r("31c3"),n=r.n(i);n.a},e332:function(t,e,r){},f188:function(t,e,r){}});
//# sourceMappingURL=app.3d653c05.js.map