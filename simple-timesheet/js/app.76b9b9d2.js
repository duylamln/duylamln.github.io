(function(e){function t(t){for(var a,i,s=t[0],c=t[1],u=t[2],l=0,h=[];l<s.length;l++)i=s[l],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&h.push(o[i][0]),o[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);d&&d(t);while(h.length)h.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,s=1;s<n.length;s++){var c=n[s];0!==o[c]&&(a=!1)}a&&(r.splice(t--,1),e=i(i.s=n[0]))}return e}var a={},o={app:0},r=[];function i(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=a,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(n,a,function(t){return e[t]}.bind(null,a));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/simple-timesheet/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var d=c;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"01e5":function(e,t,n){},"034f":function(e,t,n){"use strict";var a=n("85ec"),o=n.n(a);o.a},"08ff":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("4de4"),n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("a026"),o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view",{staticClass:"view"})],1)},r=[],i={name:"app",components:{}},s=i,c=(n("034f"),n("2877")),u=Object(c["a"])(s,o,r,!1,null,null,null),d=u.exports,l=n("e069"),h=n.n(l),k=n("69c5"),f=n.n(k),p=(n("dcad"),n("13d5"),n("45fc"),n("8c4f")),m=n("8aa5"),y=n.n(m),v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("router-view")},w=[],b={name:"HelloWorld",props:{msg:String}},g=b,W=Object(c["a"])(g,v,w,!1,null,"446b845f",null),D=W.exports,O=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"header"})},_=[],C={name:"HeaderBar",props:[{title:String}]},I=C,$=(n("75cc"),Object(c["a"])(I,O,_,!1,null,"97878b82",null)),T=$.exports,x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("header-bar",{attrs:{title:"Week "+e.selectedWeekNumber}}),n("div",{staticClass:"content"},[n("div",{staticClass:"week-number"},[n("span",[n("i",{staticClass:"ivu-icon ivu-icon-md-calendar"}),e._v(" "+e._s("Week "+e.selectedWeekNumber)+" ")]),n("div",[n("ButtonGroup",[n("Button",{attrs:{type:"primary",icon:"ios-skip-backward"},on:{click:e.gotoPrevWeek}}),n("Button",{attrs:{type:"primary",icon:"ios-skip-forward"},on:{click:e.gotoNextWeek}})],1)],1)]),e.isLoading?n("div",{staticStyle:{padding:"16px"}},[n("Spin")],1):e._e(),e.isLoading?e._e():n("div",{staticClass:"week-days"},[e._l(e.week.weekdays,(function(t,a){return[n("div",{key:a,staticClass:"week-day-item",class:{selected:e.isSelectedWeekDay(t)},on:{click:function(n){return e.weekDayClick(t)}}},[n("Row",[n("Col",{attrs:{span:"12"}},[n("Row",[n("div",{staticClass:"title"},[e.isToday(t)?e._e():[n("span",[n("strong",[e._v(e._s(e._f("format")(t.date,"ddd")))])])],e.isToday(t)?n("Badge",{attrs:{dot:""}},[n("span",[n("strong",[e._v(e._s(e._f("format")(t.date,"ddd")))])])]):e._e()],2)]),n("Row",[n("div",{staticClass:"sub-title"},[n("span",[e._v(e._s(e._f("format")(t.date,"DD/MM/YYYY")))])])])],1),n("Col",{staticStyle:{"text-align":"right"},attrs:{span:"12"}},[n("Row",[n("TimePicker",{attrs:{open:t.openCheckInTimePicker,value:t.checkIn&&t.checkIn.toDate(),steps:[1,5],format:"HH:mm",placement:"bottom-end",confirm:""},on:{"on-change":function(t){return e.handleTimeChange(t,"checkIn")},"on-ok":function(e){t.openCheckInTimePicker=!1}}},[n("a",{attrs:{href:"javascript:void(0)"},on:{click:function(e){t.openCheckInTimePicker=!0}}},[[t.checkIn?n("span",{staticStyle:{color:"#19be6b"}},[e._v(e._s(e._f("format")(t.checkIn,"HH:mm")))]):e._e()]],2)]),t.checkOut?n("span",{staticStyle:{margin:"0 5px"}},[e._v("-")]):e._e(),n("TimePicker",{attrs:{open:t.openCheckOutTimePicker,value:t.checkOut&&t.checkOut.toDate(),steps:[1,5],format:"HH:mm",placement:"bottom-end",confirm:""},on:{"on-change":function(t){return e.handleTimeChange(t,"checkOut")},"on-ok":function(e){t.openCheckOutTimePicker=!1}}},[n("a",{attrs:{href:"javascript:void(0)"},on:{click:function(e){t.openCheckOutTimePicker=!0}}},[[t.checkOut?n("span",{staticStyle:{color:"#ed4014"}},[e._v(e._s(e._f("format")(t.checkOut,"HH:mm")))]):e._e()]],2)])],1),n("Row",[n("strong",[e._v(e._s(t.duration))])])],1)],1)],1)]})),n("div",{staticClass:"week-day-item"},[n("Row",[n("Col",{attrs:{span:"12"}},[n("Row",[n("div",{staticClass:"title"},[n("strong",[e._v("Total")])])])],1),n("Col",{staticStyle:{"text-align":"right"},attrs:{span:"12"}},[n("strong",[e._v(e._s(e.totalWeekHours))])])],1)],1),n("div",{staticClass:"week-day-item",staticStyle:{"margin-top":"10px"}},[n("Input",{attrs:{type:"textarea",rows:4,placeholder:"Enter something..."},on:{"on-focus":function(){return e.selectedWeekDay=void 0}},model:{value:e.week.note,callback:function(t){e.$set(e.week,"note",t)},expression:"week.note"}})],1)],2),e.selectedWeekDay?n("div",{staticClass:"fixed-bottom"},[e.selectedWeekDay.checkIn?e._e():n("Button",{attrs:{type:"success",long:""},on:{click:e.checkIn}},[e._v("CHECK IN")]),e.selectedWeekDay.checkIn&&!e.selectedWeekDay.checkOut?n("Button",{attrs:{type:"error",long:""},on:{click:e.checkOut}},[e._v("CHECK OUT")]):e._e(),e.selectedWeekDay.checkIn&&e.selectedWeekDay.checkOut?n("Button",{attrs:{type:"warning",long:""},on:{click:e.reset}},[e._v("RESET")]):e._e()],1):e._e(),e.selectedWeekDay?e._e():n("div",{staticClass:"fixed-bottom"},[n("Button",{attrs:{type:"info",long:""},on:{click:e.updateNote}},[e._v("UPDATE NOTE")])],1)])],1)},S=[],P=(n("c740"),n("4160"),n("a434"),n("a9e3"),n("b680"),n("ac1f"),n("1276"),n("159b"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"header"},[n("div",{staticClass:"header-left"},[n("Icon",{attrs:{type:"ios-arrow-back",size:"30"}}),e._v("Back ")],1),n("div",{staticClass:"header-middle"},[n("span",[e._v(e._s(e.title))])]),n("div",{staticClass:"header-right"},[n("span",{on:{click:e.logout}},[e._v("Logout")])])])}),E=[],N=(n("5319"),{name:"HeaderBar",props:{title:String},methods:{logout:function(){var e=this;this.$fb.auth.signOut().then((function(){return e.$router.replace("login")}))}}}),j=N,H=(n("6486"),Object(c["a"])(j,P,E,!1,null,"07868420",null)),M=H.exports,B=null,Y={name:"Week",components:{HeaderBar:M},props:{},data:function(){return{week:{},today:{},selectedWeekDay:void 0,selectedWeekNumber:0,isLoading:!0}},mounted:function(){var e=this;this.today=this.$moment(),this.selectedWeekNumber=this.getCurrentWeekNumber(),this.getWeek(this.selectedWeekNumber).then((function(t){return e.week=t})).then((function(){var t=e.week.weekdays.findIndex((function(t){return t.dayOfYear==e.today.dayOfYear()}));t>-1&&(e.selectedWeekDay=e.week.weekdays[t])}))},computed:{totalWeekHours:function(){if(!this.week||!this.week.weekdays)return Number(0).toFixed(2);var e=this.week.weekdays.reduce((function(e,t){return e+parseFloat(t.duration||"0")}),0);return(Math.round(100*e)/100).toFixed(2)}},methods:{getCurrentWeekNumber:function(){var e=this.today.week();return 0==this.today.day()&&e--,e},getWeek:function(e){var t=this;return e||(e=this.$moment().week(),0==this.today.day()&&e--),this.isLoading=!0,this.$fb.weekCollection.where("number","==",e).where("userId","==",this.$fb.auth.currentUser.uid).limit(1).get().then((function(n){return t.isLoading=!1,n.empty?t.buildNewWeek(e):n.docs[0].data()})).then((function(e){return t.convertToMomentDate(e),e}))},buildNewWeek:function(e){for(var t=this.$moment().week(e),n=this.$moment(t).startOf("week").add("d",1),a=this.$moment(t).endOf("week").add("d",1),o={number:e,startDate:n,endDate:a,weekdays:[],userId:this.$fb.auth.currentUser.uid,note:""},r=0;r<7;r++){var i=this.$moment(n).add("d",r),s=i.dayOfYear(),c=i.days();o.weekdays.push({date:i,dayOfYear:s,dayOfWeek:c,checkIn:"",checkOut:"",duration:"",openCheckInTimePicker:!1,openCheckOutTimePicker:!1})}return o},isToday:function(e){return this.today.isSame(e.date,"day")},weekDayClick:function(e){this.selectedWeekDay=e},isSelectedWeekDay:function(e){return this.selectedWeekDay&&this.selectedWeekDay.dayOfWeek==e.dayOfWeek},checkIn:function(){this.selectedWeekDay.checkIn=this.$moment(),this.updateWeekDay()},checkOut:function(){this.selectedWeekDay.checkOut=this.$moment(),this.updateWeekDay()},reset:function(){var e=this;this.$Modal.confirm({title:"Confirmation",content:"Are you sure you want to reset timesheet on ".concat(this.$options.filters.format(this.selectedWeekDay.date,"ddd DD/MM/YYYY")," ?"),onOk:function(){e.selectedWeekDay.checkIn="",e.selectedWeekDay.checkOut="",e.updateWeekDay()},onCancel:function(){}})},updateWeekDay:function(){var e=this;B&&window.clearTimeout(B),B=window.setTimeout((function(){if(e.selectedWeekDay.checkIn&&e.selectedWeekDay.checkOut){var t=e.$moment.duration(e.selectedWeekDay.checkOut.diff(e.selectedWeekDay.checkIn));e.selectedWeekDay.duration=(Math.round(100*t.as("hours"))/100).toFixed(2)}else e.selectedWeekDay.duration="";var n=e.week.weekdays.findIndex((function(t){return t.dayOfYear==e.selectedWeekDay.dayOfYear}));e.week.weekdays.splice(n,1,e.selectedWeekDay);var a={};if(!e.week.id){var o=e.$fb.weekCollection.doc();return e.week.id=o.id,a=e.buildFSWeek(),o.set(a).then((function(){return e.$Message.info("Timesheet saved!")}))}a=e.buildFSWeek(),e.$fb.weekCollection.doc(a.id).set(a).then((function(){return e.$Message.info("Timesheet saved!")}))}),500)},buildFSWeek:function(){var e={};return Object.assign(e,this.week),e.startDate=e.startDate&&e.startDate.toDate(),e.endDate=e.endDate&&e.endDate.toDate(),e.weekdays=[],this.week.weekdays.forEach((function(t){e.weekdays.push({date:t.date&&t.date.toDate(),checkIn:t.checkIn&&t.checkIn.toDate(),checkOut:t.checkOut&&t.checkOut.toDate(),duration:t.duration||"",dayOfWeek:t.dayOfWeek,dayOfYear:t.dayOfYear})})),e},convertToMomentDate:function(e){var t=this;e.startDate=this.$moment(e.startDate.toDate()),e.endDate=this.$moment(e.endDate.toDate()),e.weekdays.forEach((function(e){e.date=t.$moment(e.date.toDate()),e.checkIn=e.checkIn&&t.$moment(e.checkIn.toDate()),e.checkOut=e.checkOut&&t.$moment(e.checkOut.toDate()),e.openCheckInTimePicker=!1,e.openCheckOutTimePicker=!1}))},handleTimeChange:function(e,t){var n=e.split(":"),a=n[0],o=n[1];"checkIn"==t?this.selectedWeekDay.checkIn.set("hour",a).set("minute",o):this.selectedWeekDay.checkOut.set("hour",a).set("minute",o),this.updateWeekDay()},gotoPrevWeek:function(){var e=this;this.selectedWeekNumber--,this.getWeek(this.selectedWeekNumber).then((function(t){return e.week=t}))},gotoNextWeek:function(){var e=this;this.selectedWeekNumber++,this.getWeek(this.selectedWeekNumber).then((function(t){return e.week=t}))},updateNote:function(){var e=this,t={};if(!this.week.id){var n=this.$fb.weekCollection.doc();return this.week.id=n.id,t=this.buildFSWeek(),n.set(t).then((function(){return e.$Message.info("Timesheet saved!")}))}t=this.buildFSWeek(),this.$fb.weekCollection.doc(t.id).set(t).then((function(){return e.$Message.info("Timesheet saved!")}))}}},F=Y,L=(n("a80f"),Object(c["a"])(F,x,S,!1,null,"76a8f4ce",null)),A=L.exports,R=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login-form"},[n("h1",{staticStyle:{"margin-bottom":"30px"}},[e._v("Simple Timesheet")]),n("Form",{ref:"loginForm",nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.login(t)}}},[n("FormItem",{attrs:{prop:"email"}},[n("Input",{attrs:{placeholder:"john.due@gmail.com"},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}},[n("span",{attrs:{slot:"prepend"},slot:"prepend"},[n("Icon",{attrs:{size:16,type:"ios-person"}})],1)])],1),n("FormItem",{attrs:{prop:"password"}},[n("Input",{attrs:{type:"password",placeholder:"verysimple"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}},[n("span",{attrs:{slot:"prepend"},slot:"prepend"},[n("Icon",{attrs:{size:14,type:"md-lock"}})],1)])],1),n("FormItem",[n("Button",{attrs:{type:"primary",long:""},on:{click:e.login}},[e._v("Login")])],1)],1)],1)},U=[],z={name:"Login",data:function(){return{email:"",password:"",showError:!1}},methods:{login:function(){var e=this;this.$fb.auth.signInWithEmailAndPassword(this.email,this.password).then((function(){e.$router.replace("/")})).catch((function(t){return e.showError=!0}))}}},q=z,K=(n("e0ec"),Object(c["a"])(q,R,U,!1,null,"04e5cbb6",null)),J=K.exports;function G(){return[{path:"/",redirect:"/week",name:"Home",component:D,meta:{requiresAuth:!0},children:[{path:"dashboard",name:"Dashboard",component:T,meta:{title:"Dashboard"}},{path:"week",name:"Week",component:A,meta:{title:"Week"}}]},{path:"/login",name:"Login",component:J,meta:{requiresAuth:!1,title:"Login"}}]}a["default"].use(p["a"]);var V=new p["a"]({mode:"hash",linkActiveClass:"open active",scrollBehavior:function(){return{y:0}},routes:G()});V.beforeEach((function(e,t,n){var a=y.a.auth().currentUser,o=e.matched.some((function(e){return e.meta.requiresAuth}));document.title=e.matched.reduce((function(e,t){return t.meta.title?t.meta.title:""}),""),o&&!a?n("/login"):n()}));var X=V,Z=(n("e71f"),{apiKey:"AIzaSyB_OVuTcWRzhLSSxZDIyNH1EiEl5XnATPU",authDomain:"t2pautoserviceweb.firebaseapp.com",databaseURL:"https://t2pautoserviceweb.firebaseio.com",projectId:"t2pautoserviceweb",storageBucket:"t2pautoserviceweb.appspot.com",messagingSenderId:"930467970864",appId:"1:930467970864:web:4a89b4a172253c19"});y.a.initializeApp(Z);var Q=y.a.firestore(),ee=y.a.auth(),te=ee.currentUser,ne=Q.collection("weeks"),ae={db:Q,auth:ee,currentUser:te,weekCollection:ne};a["default"].prototype.$fb=ae,a["default"].use(n("2ead")),a["default"].use(p["a"]),a["default"].use(h.a,{locale:f.a}),a["default"].config.productionTip=!1,a["default"].filter("format",(function(e,t){return e.format(t)}));var oe="";ae.auth.onAuthStateChanged((function(){oe||(oe=new a["default"]({router:X,render:function(e){return e(d)}}).$mount("#app"))}))},5737:function(e,t,n){},6486:function(e,t,n){"use strict";var a=n("01e5"),o=n.n(a);o.a},"75cc":function(e,t,n){"use strict";var a=n("97f3"),o=n.n(a);o.a},"85ec":function(e,t,n){},"97f3":function(e,t,n){},a80f:function(e,t,n){"use strict";var a=n("08ff"),o=n.n(a);o.a},e0ec:function(e,t,n){"use strict";var a=n("5737"),o=n.n(a);o.a}});
//# sourceMappingURL=app.76b9b9d2.js.map